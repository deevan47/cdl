{"ast":null,"code":"import { ProjectStatus } from '../../shared/models/project.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"../../shared/services/project.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction UserDashboardComponent_h2_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 22);\n    i0.ɵɵtext(1, \"User\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"h4\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.currentUser == null ? null : ctx_r1.currentUser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.currentUser == null ? null : ctx_r1.currentUser.role);\n  }\n}\nfunction UserDashboardComponent_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Dashboard\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Profile\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Settings\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Notifications\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Messages\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.isDarkMode ? \"Light\" : \"Dark\");\n  }\n}\nfunction UserDashboardComponent_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Logout\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_34_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" You are not managing any projects. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_34_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_34_div_20_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const p_r17 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.navigateTo(p_r17.platform, p_r17.id));\n    });\n    i0.ɵɵelementStart(1, \"div\", 2)(2, \"div\", 44);\n    i0.ɵɵelement(3, \"div\", 45);\n    i0.ɵɵelementStart(4, \"p\", 46);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 47)(9, \"div\", 48);\n    i0.ɵɵelement(10, \"div\", 49);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r17 = ctx.$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"bg-orange-500\", p_r17.platform === \"flame\")(\"bg-blue-500\", p_r17.platform === \"swayam\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r17.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r14.getStatusBadgeClass(p_r17[\"overallStatus\"] == null ? null : p_r17[\"overallStatus\"].color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r17[\"overallStatus\"] == null ? null : p_r17[\"overallStatus\"].label);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r14.getProgressBarColorClass(p_r17[\"overallStatus\"] == null ? null : p_r17[\"overallStatus\"].color));\n    i0.ɵɵstyleProp(\"width\", p_r17.overallProgress, \"%\");\n  }\n}\nfunction UserDashboardComponent_div_34_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" No projects assigned to you yet. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_34_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_34_div_26_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const p_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.navigateTo(p_r20.platform, p_r20.id));\n    });\n    i0.ɵɵelementStart(1, \"div\", 2)(2, \"div\", 44);\n    i0.ɵɵelement(3, \"div\", 45);\n    i0.ɵɵelementStart(4, \"p\", 46);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 47)(9, \"div\", 48);\n    i0.ɵɵelement(10, \"div\", 49);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r20 = ctx.$implicit;\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"bg-orange-500\", p_r20.platform === \"flame\")(\"bg-blue-500\", p_r20.platform === \"swayam\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r20.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r16.getStatusBadgeClass(p_r20[\"overallStatus\"] == null ? null : p_r20[\"overallStatus\"].color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r20[\"overallStatus\"] == null ? null : p_r20[\"overallStatus\"].label);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r16.getProgressBarColorClass(p_r20[\"overallStatus\"] == null ? null : p_r20[\"overallStatus\"].color));\n    i0.ɵɵstyleProp(\"width\", p_r20.overallProgress, \"%\");\n  }\n}\nfunction UserDashboardComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"h1\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 30)(4, \"div\", 31);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_34_Template_div_click_4_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.navigateTo(\"flame\"));\n    });\n    i0.ɵɵelementStart(5, \"h2\", 32);\n    i0.ɵɵtext(6, \"Flame\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 33);\n    i0.ɵɵtext(8, \"Internal Creative Projects\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 34);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_34_Template_div_click_9_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.navigateTo(\"swayam\"));\n    });\n    i0.ɵɵelementStart(10, \"h2\", 32);\n    i0.ɵɵtext(11, \"Swayam\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 33);\n    i0.ɵɵtext(13, \"External Educational Courses\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 35)(15, \"div\", 36)(16, \"h3\", 37);\n    i0.ɵɵtext(17, \" Managed Projects \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, UserDashboardComponent_div_34_div_18_Template, 2, 0, \"div\", 38);\n    i0.ɵɵelementStart(19, \"div\", 39);\n    i0.ɵɵtemplate(20, UserDashboardComponent_div_34_div_20_Template, 11, 12, \"div\", 40);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 36)(22, \"h3\", 37);\n    i0.ɵɵtext(23, \" My Projects \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, UserDashboardComponent_div_34_div_24_Template, 2, 0, \"div\", 38);\n    i0.ɵɵelementStart(25, \"div\", 39);\n    i0.ɵɵtemplate(26, UserDashboardComponent_div_34_div_26_Template, 11, 12, \"div\", 41);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Welcome, \", ctx_r9.currentUser == null ? null : ctx_r9.currentUser.name == null ? null : ctx_r9.currentUser.name.split(\" \")[0], \"!\");\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.managedProjects.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.managedProjects);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.assignedProjects.length === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.assignedProjects);\n  }\n}\nfunction UserDashboardComponent_div_35_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 60);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_35_div_6_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r32);\n      const p_r30 = restoredCtx.$implicit;\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r31.selectProject(p_r30));\n    });\n    i0.ɵɵelementStart(1, \"div\", 61)(2, \"p\", 46);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 62)(7, \"div\", 48);\n    i0.ɵɵelement(8, \"div\", 49);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r30 = ctx.$implicit;\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"bg-orange-500-10\", ctx_r26.currentView === \"flame\" && (ctx_r26.selectedProject == null ? null : ctx_r26.selectedProject.id) === p_r30.id)(\"bg-blue-500-10\", ctx_r26.currentView === \"swayam\" && (ctx_r26.selectedProject == null ? null : ctx_r26.selectedProject.id) === p_r30.id)(\"bg-gray-100\", (ctx_r26.selectedProject == null ? null : ctx_r26.selectedProject.id) === p_r30.id)(\"dark:bg-gray-800\", (ctx_r26.selectedProject == null ? null : ctx_r26.selectedProject.id) === p_r30.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(p_r30.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r26.getStatusBadgeClass(p_r30[\"overallStatus\"] == null ? null : p_r30[\"overallStatus\"].color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(p_r30[\"overallStatus\"] == null ? null : p_r30[\"overallStatus\"].label);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r26.getProgressBarColorClass(p_r30[\"overallStatus\"] == null ? null : p_r30[\"overallStatus\"].color));\n    i0.ɵɵstyleProp(\"width\", p_r30.overallProgress, \"%\");\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 93);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_35_div_8_div_22_div_13_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const stage_r34 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r41.openAssignmentModal(stage_r34));\n    });\n    i0.ɵɵtext(1, \" Assign / Edit Team \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 94);\n  }\n  if (rf & 2) {\n    const user_r44 = ctx.$implicit;\n    const ctx_r37 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"src\", ctx_r37.getUserAvatar(user_r44), i0.ɵɵsanitizeUrl)(\"title\", user_r44.name);\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 95);\n    i0.ɵɵtext(1, \"No one assigned\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 96)(1, \"div\", 44)(2, \"input\", 97);\n    i0.ɵɵlistener(\"change\", function UserDashboardComponent_div_35_div_8_div_22_div_13_div_11_Template_input_change_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r47);\n      const task_r45 = restoredCtx.$implicit;\n      const ctx_r46 = i0.ɵɵnextContext(5);\n      return i0.ɵɵresetView(ctx_r46.toggleTask(task_r45));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 98);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 79)(6, \"p\", 99);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const task_r45 = ctx.$implicit;\n    const stage_r34 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r39 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"opacity-60\", !ctx_r39.canEditStage(stage_r34));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", task_r45.isCompleted)(\"disabled\", !ctx_r39.canEditStage(stage_r34));\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"line-through\", task_r45.isCompleted)(\"text-gray-500\", task_r45.isCompleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(task_r45.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(8, 14, task_r45.startDate), \" - \", i0.ɵɵpipeBind1(9, 16, task_r45.endDate), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r39.getStatusBadgeClass(ctx_r39.getTaskStatus(task_r45).color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r39.getTaskStatus(task_r45).label);\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 100);\n    i0.ɵɵtext(1, \" No tasks in this stage. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 82)(1, \"div\", 83)(2, \"h5\", 84);\n    i0.ɵɵtext(3, \"Assigned Personnel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, UserDashboardComponent_div_35_div_8_div_22_div_13_button_4_Template, 2, 0, \"button\", 85);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 86);\n    i0.ɵɵtemplate(6, UserDashboardComponent_div_35_div_8_div_22_div_13_img_6_Template, 1, 2, \"img\", 87);\n    i0.ɵɵtemplate(7, UserDashboardComponent_div_35_div_8_div_22_div_13_p_7_Template, 2, 0, \"p\", 88);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h5\", 89);\n    i0.ɵɵtext(9, \"Tasks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 90);\n    i0.ɵɵtemplate(11, UserDashboardComponent_div_35_div_8_div_22_div_13_div_11_Template, 12, 18, \"div\", 91);\n    i0.ɵɵtemplate(12, UserDashboardComponent_div_35_div_8_div_22_div_13_div_12_Template, 2, 0, \"div\", 92);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const stage_r34 = i0.ɵɵnextContext().$implicit;\n    const ctx_r35 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r35.currentUser == null ? null : ctx_r35.currentUser.id) === ctx_r35.selectedProject.projectManagerId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", stage_r34.assignedTeamMembers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !stage_r34.assignedTeamMembers || stage_r34.assignedTeamMembers.length === 0);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", stage_r34.tasks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !stage_r34.tasks || stage_r34.tasks.length === 0);\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r51 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 74)(1, \"div\", 75);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_35_div_8_div_22_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r51);\n      const stage_r34 = restoredCtx.$implicit;\n      const ctx_r50 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r50.toggleStageSection(stage_r34));\n    });\n    i0.ɵɵelementStart(2, \"div\")(3, \"h4\", 76);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 77)(6, \"div\", 48);\n    i0.ɵɵelement(7, \"div\", 78);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 79)(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 80);\n    i0.ɵɵelement(12, \"span\", 5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(13, UserDashboardComponent_div_35_div_8_div_22_div_13_Template, 13, 5, \"div\", 81);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const stage_r34 = ctx.$implicit;\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(stage_r34.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r33.getProgressBarColorClass(stage_r34[\"status\"] == null ? null : stage_r34[\"status\"].color));\n    i0.ɵɵstyleProp(\"width\", stage_r34.progress, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r33.getStatusBadgeClass(stage_r34[\"status\"] == null ? null : stage_r34[\"status\"].color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(stage_r34[\"status\"] == null ? null : stage_r34[\"status\"].label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"rotate-180\", stage_r34.isOpen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r33.getIcon(\"chevronDown\"), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", stage_r34.isOpen);\n  }\n}\nfunction UserDashboardComponent_div_35_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 63)(1, \"div\", 64)(2, \"div\")(3, \"h2\", 29);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 65);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 66);\n    i0.ɵɵelement(8, \"img\", 67);\n    i0.ɵɵelementStart(9, \"div\")(10, \"p\", 68);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 69);\n    i0.ɵɵtext(13, \"Project Manager\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 70)(17, \"h3\", 71);\n    i0.ɵɵtext(18, \"Overall Progress\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 48);\n    i0.ɵɵelement(20, \"div\", 49);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 72);\n    i0.ɵɵtemplate(22, UserDashboardComponent_div_35_div_8_div_22_Template, 14, 12, \"div\", 73);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r27.selectedProject.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r27.selectedProject.scenario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r27.getUserAvatar(ctx_r27.selectedProject.projectManager), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r27.getUserName(ctx_r27.selectedProject.projectManager));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r27.getStatusBadgeClass(ctx_r27.selectedProject[\"overallStatus\"] == null ? null : ctx_r27.selectedProject[\"overallStatus\"].color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r27.selectedProject[\"overallStatus\"] == null ? null : ctx_r27.selectedProject[\"overallStatus\"].label);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMap(ctx_r27.getProgressBarColorClass(ctx_r27.selectedProject[\"overallStatus\"] == null ? null : ctx_r27.selectedProject[\"overallStatus\"].color));\n    i0.ɵɵstyleProp(\"width\", ctx_r27.selectedProject.overallProgress, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r27.selectedProject.stages);\n  }\n}\nfunction UserDashboardComponent_div_35_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 101)(1, \"p\", 102);\n    i0.ɵɵtext(2, \"Select a project\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51)(1, \"div\", 52)(2, \"div\", 53)(3, \"h2\", 54);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 55);\n    i0.ɵɵtemplate(6, UserDashboardComponent_div_35_div_6_Template, 9, 16, \"div\", 56);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 57);\n    i0.ɵɵtemplate(8, UserDashboardComponent_div_35_div_8_Template, 23, 12, \"div\", 58);\n    i0.ɵɵtemplate(9, UserDashboardComponent_div_35_ng_template_9_Template, 3, 0, \"ng-template\", null, 59, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r28 = i0.ɵɵreference(10);\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"text-orange-500\", ctx_r10.currentView === \"flame\")(\"text-blue-500\", ctx_r10.currentView === \"swayam\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r10.currentView, \" Projects\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.getFilteredProjects(ctx_r10.currentView));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.selectedProject)(\"ngIfElse\", _r28);\n  }\n}\nfunction UserDashboardComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 103)(1, \"h1\", 104);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 105)(4, \"p\", 106);\n    i0.ɵɵtext(5, \"This section is under construction.\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r11.currentView);\n  }\n}\nfunction UserDashboardComponent_div_37_div_5__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 121);\n    i0.ɵɵelement(1, \"path\", 122);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_37_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 115);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_37_div_5_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r56);\n      const user_r53 = restoredCtx.$implicit;\n      const ctx_r55 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r55.toggleUserSelection(user_r53.id));\n    });\n    i0.ɵɵelementStart(1, \"div\", 116);\n    i0.ɵɵtemplate(2, UserDashboardComponent_div_37_div_5__svg_svg_2_Template, 2, 0, \"svg\", 117);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 118);\n    i0.ɵɵelementStart(4, \"div\")(5, \"p\", 119);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 120);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r53 = ctx.$implicit;\n    const ctx_r52 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"bg-blue-50\", ctx_r52.isUserAssigned(user_r53.id))(\"dark:bg-blue-900\", ctx_r52.isUserAssigned(user_r53.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"border-blue-500\", ctx_r52.isUserAssigned(user_r53.id))(\"bg-blue-500\", ctx_r52.isUserAssigned(user_r53.id))(\"border-gray-300\", !ctx_r52.isUserAssigned(user_r53.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r52.isUserAssigned(user_r53.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r52.getUserAvatar(user_r53), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r53.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r53.role);\n  }\n}\nfunction UserDashboardComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r58 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 107);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_37_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r57 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r57.closeAssignmentModal());\n    });\n    i0.ɵɵelementStart(1, \"div\", 108);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_37_Template_div_click_1_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementStart(2, \"h3\", 109);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 110);\n    i0.ɵɵtemplate(5, UserDashboardComponent_div_37_div_5_Template, 9, 14, \"div\", 111);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 112)(7, \"button\", 113);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_37_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r60 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r60.closeAssignmentModal());\n    });\n    i0.ɵɵtext(8, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 114);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_37_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r61 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r61.saveAssignments());\n    });\n    i0.ɵɵtext(10, \"Save Assignments\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Assign Team to \", ctx_r12.selectedStageForAssignment == null ? null : ctx_r12.selectedStageForAssignment.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.availableUsers);\n  }\n}\nconst _c0 = function () {\n  return [\"profile\", \"settings\", \"notifications\", \"messages\"];\n};\nclass UserDashboardComponent {\n  sanitizer;\n  projectService;\n  router;\n  // State variables\n  isDarkMode = false;\n  isSidebarCollapsed = false;\n  currentView = 'home';\n  // Data\n  currentUser = null;\n  allProjects = [];\n  managedProjects = [];\n  assignedProjects = [];\n  selectedProject = null;\n  // Assignment UI\n  availableUsers = [];\n  showAssignmentModal = false;\n  selectedStageForAssignment = null;\n  selectedUsersForAssignment = [];\n  // Icons\n  ICONS_SVG = {\n    home: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path><polyline points=\"9 22 9 12 15 12 15 22\"></polyline></svg>`,\n    user: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path><circle cx=\"12\" cy=\"7\" r=\"4\"></circle></svg>`,\n    settings: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06-.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>`,\n    bell: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path><path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path></svg>`,\n    message: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path></svg>`,\n    logout: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path><polyline points=\"16 17 21 12 16 7\"></polyline><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line></svg>`,\n    sun: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><circle cx=\"12\" cy=\"12\" r=\"5\"></circle><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line><line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line><line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line><line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line><line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line></svg>`,\n    moon: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path></svg>`,\n    chevronLeft: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-600 dark:text-gray-300\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>`,\n    chevronRight: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-600 dark:text-gray-300\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>`,\n    chevronDown: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5 text-gray-500\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>`\n  };\n  constructor(sanitizer, projectService, router) {\n    this.sanitizer = sanitizer;\n    this.projectService = projectService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.loadUser();\n    this.loadProjects();\n    this.loadAvailableUsers();\n  }\n  loadUser() {\n    const userInfo = localStorage.getItem('userInfo');\n    if (userInfo) {\n      this.currentUser = JSON.parse(userInfo);\n    } else {\n      this.router.navigate(['/auth/login']);\n    }\n  }\n  loadProjects() {\n    if (!this.currentUser) return;\n    this.projectService.getAssignedProjects(this.currentUser.id).subscribe({\n      next: projects => {\n        this.allProjects = projects;\n        this.splitProjects();\n        this.calculateAllProjectsHealth();\n      },\n      error: err => console.error('Failed to load projects', err)\n    });\n  }\n  loadAvailableUsers() {\n    this.projectService.getAvailableManagers().subscribe({\n      next: users => {\n        this.availableUsers = users;\n      },\n      error: err => console.error('Failed to load users', err)\n    });\n  }\n  splitProjects() {\n    if (!this.currentUser) return;\n    this.managedProjects = this.allProjects.filter(p => p.projectManager?.id === this.currentUser?.id);\n    this.assignedProjects = this.allProjects.filter(p => p.projectManager?.id !== this.currentUser?.id);\n  }\n  // --- UI Actions ---\n  getIcon(name) {\n    return this.sanitizer.bypassSecurityTrustHtml(this.ICONS_SVG[name] || '');\n  }\n  navigateTo(page, projectId = null) {\n    this.currentView = page;\n    if (projectId) {\n      this.selectedProject = this.allProjects.find(p => p.id === projectId) || null;\n    } else {\n      if (page === 'flame' || page === 'swayam') {\n        const platformProjects = this.allProjects.filter(p => p.platform === page);\n        if (platformProjects.length > 0 && (!this.selectedProject || this.selectedProject.platform !== page)) {\n          this.selectedProject = platformProjects[0];\n        }\n      } else {\n        this.selectedProject = null;\n      }\n    }\n  }\n  selectProject(project) {\n    this.selectedProject = project;\n  }\n  toggleDarkMode() {\n    this.isDarkMode = !this.isDarkMode;\n    if (this.isDarkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }\n  toggleSidebar() {\n    this.isSidebarCollapsed = !this.isSidebarCollapsed;\n  }\n  toggleTask(task) {\n    // Implement task toggle logic with backend\n    // For now, just toggle locally\n    task.isCompleted = !task.isCompleted;\n    this.calculateAllProjectsHealth();\n  }\n  toggleStageSection(stage) {\n    stage.isOpen = !stage.isOpen;\n  }\n  getFilteredProjects(platform) {\n    return this.allProjects.filter(p => p.platform === platform);\n  }\n  getStats() {\n    return {\n      total: this.allProjects.length,\n      completed: this.allProjects.filter(p => p.status === ProjectStatus.COMPLETED).length,\n      inProgress: this.allProjects.filter(p => p.status === ProjectStatus.IN_PROGRESS).length,\n      lagging: this.allProjects.filter(p => p.status === ProjectStatus.LAGGING).length\n    };\n  }\n  // --- Assignment Logic ---\n  openAssignmentModal(stage) {\n    this.selectedStageForAssignment = stage;\n    this.selectedUsersForAssignment = stage.assignedTeamMembers?.map(u => u.id) || [];\n    this.showAssignmentModal = true;\n  }\n  closeAssignmentModal() {\n    this.showAssignmentModal = false;\n    this.selectedStageForAssignment = null;\n    this.selectedUsersForAssignment = [];\n  }\n  toggleUserSelection(userId) {\n    const index = this.selectedUsersForAssignment.indexOf(userId);\n    if (index > -1) {\n      this.selectedUsersForAssignment.splice(index, 1);\n    } else {\n      this.selectedUsersForAssignment.push(userId);\n    }\n  }\n  saveAssignments() {\n    if (!this.selectedStageForAssignment) return;\n    this.projectService.assignUsersToStage(this.selectedStageForAssignment.id, this.selectedUsersForAssignment).subscribe({\n      next: updatedStage => {\n        // Update local state\n        const stageIndex = this.selectedProject?.stages?.findIndex(s => s.id === updatedStage.id);\n        if (this.selectedProject && stageIndex !== undefined && stageIndex > -1) {\n          // Refresh project to get full user objects\n          this.loadProjects();\n        }\n        this.closeAssignmentModal();\n      },\n      error: err => console.error('Failed to assign users', err)\n    });\n  }\n  isUserAssigned(userId) {\n    return this.selectedUsersForAssignment.includes(userId);\n  }\n  canEditStage(stage) {\n    if (!this.currentUser) return false;\n    // PM can always edit\n    if (this.selectedProject?.projectManager?.id === this.currentUser.id) return true;\n    // Assigned users can edit\n    return stage.assignedTeamMembers?.some(u => u.id === this.currentUser?.id);\n  }\n  // --- Helpers ---\n  getTaskStatus(task) {\n    const endDate = new Date(task.endDate);\n    const today = new Date();\n    if (task.isCompleted) return {\n      label: 'Completed',\n      color: 'green'\n    };\n    if (endDate < today) return {\n      label: 'Overdue',\n      color: 'red'\n    };\n    const sevenDaysFromNow = new Date();\n    sevenDaysFromNow.setDate(today.getDate() + 7);\n    if (endDate <= sevenDaysFromNow) return {\n      label: 'At-Risk',\n      color: 'yellow'\n    };\n    return {\n      label: 'On Track',\n      color: 'green'\n    };\n  }\n  calculateAllProjectsHealth() {\n    // Use backend values if available, or calculate locally\n    // For now, relying on backend 'overallProgress' and 'status'\n    this.allProjects.forEach(p => {\n      // Map backend status to UI colors\n      let color = 'blue';\n      if (p.status === ProjectStatus.COMPLETED) color = 'green';\n      if (p.status === ProjectStatus.LAGGING) color = 'red';\n      if (p.status === ProjectStatus.AT_RISK) color = 'yellow';\n      p['overallStatus'] = {\n        label: p.status,\n        color\n      };\n      // Stage status\n      p.stages?.forEach(stage => {\n        let sColor = 'blue';\n        // map stage status...\n        stage['status'] = {\n          label: 'On Track',\n          color: 'green'\n        }; // simplified\n      });\n    });\n  }\n\n  getStatusBadgeClass(color) {\n    const classes = {\n      green: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      yellow: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',\n      red: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n      blue: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300'\n    };\n    return `px-2.5 py-0.5 text-xs font-medium rounded-full ${classes[color || 'blue']}`;\n  }\n  getProgressBarColorClass(color) {\n    const classes = {\n      green: 'bg-green-500',\n      yellow: 'bg-yellow-500',\n      red: 'bg-red-500',\n      blue: 'bg-blue-500'\n    };\n    return classes[color || 'blue'];\n  }\n  getUserAvatar(user) {\n    return user?.avatar || 'assets/default-avatar.png';\n  }\n  getUserName(user) {\n    return user?.name || 'Unknown';\n  }\n  static ɵfac = function UserDashboardComponent_Factory(t) {\n    return new (t || UserDashboardComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(i2.ProjectService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserDashboardComponent,\n    selectors: [[\"app-user-dashboard\"]],\n    decls: 38,\n    vars: 65,\n    consts: [[1, \"flex\", \"h-screen\", \"bg-gray-100\", \"dark:bg-gray-950\", \"transition-colors\", \"duration-300\", \"font-sans\"], [1, \"hidden\", \"md:flex\", \"flex-col\", \"px-4\", \"py-8\", \"bg-white\", \"border-r\", \"dark:bg-gray-900\", \"dark:border-gray-700\", \"transition-all\", \"duration-300\"], [1, \"flex\", \"items-center\", \"justify-between\"], [\"class\", \"text-3xl font-semibold text-gray-800 dark:text-white\", 4, \"ngIf\"], [1, \"p-2\", \"rounded-lg\", \"hover:bg-gray-200\", \"dark:hover:bg-gray-700\", 3, \"click\"], [3, \"innerHTML\"], [1, \"flex\", \"flex-col\", \"items-center\", \"mt-6\", \"-mx-2\", \"border-t\", \"dark:border-gray-700\", \"pt-4\"], [1, \"rounded-full\", \"object-cover\", \"ring-2\", \"ring-white\", \"dark:ring-gray-800\", 3, \"src\"], [\"class\", \"mt-2 text-center\", 4, \"ngIf\"], [1, \"flex-1\", \"mt-8\", \"space-y-2\"], [1, \"flex\", \"items-center\", \"px-4\", \"py-2\", \"rounded-md\", \"cursor-pointer\", \"hover:bg-gray-200\", \"dark:hover:bg-gray-700\", \"text-gray-600\", \"dark:text-gray-400\", \"dark:hover:text-gray-200\", \"transition-colors\", 3, \"click\"], [\"class\", \"mx-4 font-medium\", 4, \"ngIf\"], [1, \"flex\", \"flex-col\", \"items-center\", \"mt-6\", \"-mx-2\"], [1, \"w-full\", \"flex\", \"items-center\", \"justify-center\", \"px-4\", \"py-2\", \"mb-2\", \"text-gray-600\", \"bg-gray-100\", \"rounded-lg\", \"dark:bg-gray-800\", \"dark:text-gray-300\", \"hover:bg-gray-200\", \"dark:hover:bg-gray-700\", 3, \"click\"], [\"class\", \"mx-2 font-medium\", 4, \"ngIf\"], [\"routerLink\", \"/auth/logout\", 1, \"w-full\", \"flex\", \"items-center\", \"justify-center\", \"px-4\", \"py-2\", \"text-gray-600\", \"bg-gray-100\", \"rounded-lg\", \"dark:bg-gray-800\", \"dark:text-gray-300\", \"hover:bg-gray-200\", \"dark:hover:bg-gray-700\"], [1, \"flex-1\", \"flex\", \"flex-col\", \"overflow-hidden\", \"relative\"], [1, \"flex-1\", \"overflow-x-hidden\", \"overflow-y-auto\", \"bg-gray-100\", \"dark:bg-gray-950\"], [\"class\", \"p-6 md:p-8 space-y-8\", 4, \"ngIf\"], [\"class\", \"flex h-full\", 4, \"ngIf\"], [\"class\", \"p-6 md:p-8\", 4, \"ngIf\"], [\"class\", \"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\", 3, \"click\", 4, \"ngIf\"], [1, \"text-3xl\", \"font-semibold\", \"text-gray-800\", \"dark:text-white\"], [1, \"mt-2\", \"text-center\"], [1, \"font-medium\", \"text-gray-800\", \"dark:text-gray-200\"], [1, \"text-sm\", \"text-gray-600\", \"dark:text-gray-400\"], [1, \"mx-4\", \"font-medium\"], [1, \"mx-2\", \"font-medium\"], [1, \"p-6\", \"md:p-8\", \"space-y-8\"], [1, \"text-3xl\", \"font-bold\", \"text-gray-800\", \"dark:text-white\"], [1, \"grid\", \"grid-cols-1\", \"gap-8\", \"md:grid-cols-2\"], [1, \"p-8\", \"rounded-xl\", \"bg-gradient-to-br\", \"from-orange-400\", \"to-red-500\", \"text-white\", \"shadow-lg\", \"hover:shadow-2xl\", \"transform\", \"hover:-translate-y-1\", \"transition-all\", \"duration-300\", \"cursor-pointer\", 3, \"click\"], [1, \"text-4xl\", \"font-bold\"], [1, \"mt-2\", \"text-lg\", \"opacity-80\"], [1, \"p-8\", \"rounded-xl\", \"bg-gradient-to-br\", \"from-blue-400\", \"to-indigo-500\", \"text-white\", \"shadow-lg\", \"hover:shadow-2xl\", \"transform\", \"hover:-translate-y-1\", \"transition-all\", \"duration-300\", \"cursor-pointer\", 3, \"click\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-2\", \"gap-6\"], [1, \"bg-white\", \"dark:bg-gray-800\", \"p-6\", \"rounded-xl\", \"shadow-md\"], [1, \"text-xl\", \"font-semibold\", \"text-gray-800\", \"dark:text-white\", \"mb-4\", \"border-b\", \"pb-2\", \"border-gray-200\", \"dark:border-gray-700\"], [\"class\", \"text-gray-500 dark:text-gray-400 italic\", 4, \"ngIf\"], [1, \"space-y-4\"], [\"class\", \"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 cursor-pointer hover:shadow-lg transition-shadow border-l-4 border-blue-500\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 cursor-pointer hover:shadow-lg transition-shadow\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-gray-500\", \"dark:text-gray-400\", \"italic\"], [1, \"p-4\", \"rounded-lg\", \"bg-gray-50\", \"dark:bg-gray-700/50\", \"cursor-pointer\", \"hover:shadow-lg\", \"transition-shadow\", \"border-l-4\", \"border-blue-500\", 3, \"click\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"w-3\", \"h-3\", \"rounded-full\"], [1, \"font-semibold\", \"text-gray-800\", \"dark:text-gray-100\"], [1, \"mt-3\"], [1, \"w-full\", \"bg-gray-200\", \"rounded-full\", \"h-2\", \"dark:bg-gray-700\"], [1, \"h-2\", \"rounded-full\", \"transition-all\", \"duration-500\"], [1, \"p-4\", \"rounded-lg\", \"bg-gray-50\", \"dark:bg-gray-700/50\", \"cursor-pointer\", \"hover:shadow-lg\", \"transition-shadow\", 3, \"click\"], [1, \"flex\", \"h-full\"], [1, \"w-full\", \"md:w-1/3\", \"border-r\", \"dark:border-gray-700\", \"flex\", \"flex-col\", \"h-full\"], [1, \"p-4\", \"border-b\", \"dark:border-gray-700\"], [1, \"text-2xl\", \"font-bold\", \"capitalize\"], [1, \"flex-grow\", \"overflow-y-auto\"], [\"class\", \"p-4 border-b dark:border-gray-700 cursor-pointer transition-colors\", 3, \"bg-orange-500-10\", \"bg-blue-500-10\", \"bg-gray-100\", \"dark:bg-gray-800\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"hidden\", \"md:block\", \"md:w-2/3\", \"bg-white\", \"dark:bg-gray-800\"], [\"class\", \"p-6 h-full overflow-y-auto\", 4, \"ngIf\", \"ngIfElse\"], [\"noProjectSelected\", \"\"], [1, \"p-4\", \"border-b\", \"dark:border-gray-700\", \"cursor-pointer\", \"transition-colors\", 3, \"click\"], [1, \"flex\", \"justify-between\", \"items-center\"], [1, \"mt-2\"], [1, \"p-6\", \"h-full\", \"overflow-y-auto\"], [1, \"flex\", \"justify-between\", \"items-start\"], [1, \"text-gray-500\", \"dark:text-gray-400\", \"mt-1\"], [1, \"flex\", \"items-center\", \"gap-2\", \"mt-3\"], [1, \"w-8\", \"h-8\", \"rounded-full\", \"object-cover\", 3, \"src\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-200\"], [1, \"text-xs\", \"text-gray-500\", \"dark:text-gray-400\"], [1, \"mt-6\"], [1, \"text-sm\", \"font-semibold\", \"text-gray-600\", \"dark:text-gray-300\", \"mb-2\"], [1, \"mt-8\", \"space-y-4\"], [\"class\", \"bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-gray-50\", \"dark:bg-gray-900/50\", \"rounded-lg\", \"border\", \"border-gray-200\", \"dark:border-gray-700\"], [1, \"p-4\", \"flex\", \"justify-between\", \"items-center\", \"cursor-pointer\", 3, \"click\"], [1, \"font-semibold\", \"text-lg\", \"text-gray-800\", \"dark:text-gray-100\"], [1, \"mt-2\", \"w-32\"], [1, \"h-2\", \"rounded-full\"], [1, \"flex\", \"items-center\", \"gap-4\"], [1, \"transform\", \"transition-transform\"], [\"class\", \"p-4 border-t border-gray-200 dark:border-gray-700\", 4, \"ngIf\"], [1, \"p-4\", \"border-t\", \"border-gray-200\", \"dark:border-gray-700\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-3\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-300\"], [\"class\", \"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition\", 3, \"click\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"-space-x-2\", \"p-3\", \"bg-white\", \"dark:bg-gray-800\", \"rounded-md\", \"mb-6\"], [\"class\", \"w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\", 3, \"src\", \"title\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-sm text-gray-500 ml-2\", 4, \"ngIf\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-3\"], [1, \"space-y-3\"], [\"class\", \"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-md\", 3, \"opacity-60\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-sm text-gray-500 italic\", 4, \"ngIf\"], [1, \"text-xs\", \"bg-blue-600\", \"text-white\", \"px-3\", \"py-1\", \"rounded\", \"hover:bg-blue-700\", \"transition\", 3, \"click\"], [1, \"w-8\", \"h-8\", \"rounded-full\", \"object-cover\", \"ring-2\", \"ring-white\", \"dark:ring-gray-800\", 3, \"src\", \"title\"], [1, \"text-sm\", \"text-gray-500\", \"ml-2\"], [1, \"flex\", \"items-center\", \"justify-between\", \"p-3\", \"bg-white\", \"dark:bg-gray-800\", \"rounded-md\"], [\"type\", \"checkbox\", 1, \"h-5\", \"w-5\", \"rounded\", \"border-gray-300\", \"text-blue-600\", \"focus:ring-blue-500\", \"disabled:opacity-50\", 3, \"checked\", \"disabled\", \"change\"], [1, \"text-gray-800\", \"dark:text-gray-200\"], [1, \"text-sm\", \"text-gray-500\", \"dark:text-gray-400\"], [1, \"text-sm\", \"text-gray-500\", \"italic\"], [1, \"h-full\", \"flex\", \"items-center\", \"justify-center\"], [1, \"text-gray-500\", \"dark:text-gray-400\", \"text-lg\"], [1, \"p-6\", \"md:p-8\"], [1, \"text-3xl\", \"font-bold\", \"text-gray-800\", \"dark:text-white\", \"capitalize\"], [1, \"mt-8\", \"bg-white\", \"dark:bg-gray-800\", \"p-6\", \"rounded-xl\", \"shadow-md\"], [1, \"text-gray-600\", \"dark:text-gray-300\"], [1, \"absolute\", \"inset-0\", \"bg-black\", \"bg-opacity-50\", \"flex\", \"items-center\", \"justify-center\", \"z-50\", 3, \"click\"], [1, \"bg-white\", \"dark:bg-gray-800\", \"rounded-lg\", \"shadow-xl\", \"w-full\", \"max-w-md\", \"p-6\", 3, \"click\"], [1, \"text-xl\", \"font-bold\", \"text-gray-900\", \"dark:text-white\", \"mb-4\"], [1, \"max-h-64\", \"overflow-y-auto\", \"space-y-2\", \"mb-6\"], [\"class\", \"flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition\", 3, \"bg-blue-50\", \"dark:bg-blue-900\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"justify-end\", \"gap-3\"], [1, \"px-4\", \"py-2\", \"text-gray-600\", \"hover:bg-gray-100\", \"rounded-lg\", \"transition\", 3, \"click\"], [1, \"px-4\", \"py-2\", \"bg-blue-600\", \"text-white\", \"rounded-lg\", \"hover:bg-blue-700\", \"transition\", 3, \"click\"], [1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"cursor-pointer\", \"hover:bg-gray-100\", \"dark:hover:bg-gray-700\", \"transition\", 3, \"click\"], [1, \"w-5\", \"h-5\", \"border-2\", \"rounded\", \"mr-3\", \"flex\", \"items-center\", \"justify-center\"], [\"class\", \"w-3 h-3 text-white\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 4, \"ngIf\"], [1, \"w-8\", \"h-8\", \"rounded-full\", \"object-cover\", \"mr-3\", 3, \"src\"], [1, \"font-medium\", \"text-gray-800\", \"dark:text-white\"], [1, \"text-xs\", \"text-gray-500\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-3\", \"h-3\", \"text-white\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"3\", \"d\", \"M5 13l4 4L19 7\"]],\n    template: function UserDashboardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵtemplate(3, UserDashboardComponent_h2_3_Template, 2, 0, \"h2\", 3);\n        i0.ɵɵelementStart(4, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_button_click_4_listener() {\n          return ctx.toggleSidebar();\n        });\n        i0.ɵɵelement(5, \"span\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelement(7, \"img\", 7);\n        i0.ɵɵtemplate(8, UserDashboardComponent_div_8_Template, 5, 2, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"nav\", 9)(10, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_10_listener() {\n          return ctx.navigateTo(\"home\");\n        });\n        i0.ɵɵelement(11, \"span\", 5);\n        i0.ɵɵtemplate(12, UserDashboardComponent_span_12_Template, 2, 0, \"span\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_13_listener() {\n          return ctx.navigateTo(\"profile\");\n        });\n        i0.ɵɵelement(14, \"span\", 5);\n        i0.ɵɵtemplate(15, UserDashboardComponent_span_15_Template, 2, 0, \"span\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_16_listener() {\n          return ctx.navigateTo(\"settings\");\n        });\n        i0.ɵɵelement(17, \"span\", 5);\n        i0.ɵɵtemplate(18, UserDashboardComponent_span_18_Template, 2, 0, \"span\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_19_listener() {\n          return ctx.navigateTo(\"notifications\");\n        });\n        i0.ɵɵelement(20, \"span\", 5);\n        i0.ɵɵtemplate(21, UserDashboardComponent_span_21_Template, 2, 0, \"span\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"a\", 10);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_22_listener() {\n          return ctx.navigateTo(\"messages\");\n        });\n        i0.ɵɵelement(23, \"span\", 5);\n        i0.ɵɵtemplate(24, UserDashboardComponent_span_24_Template, 2, 0, \"span\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 12)(26, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_button_click_26_listener() {\n          return ctx.toggleDarkMode();\n        });\n        i0.ɵɵelement(27, \"span\", 5);\n        i0.ɵɵtemplate(28, UserDashboardComponent_span_28_Template, 2, 1, \"span\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"a\", 15);\n        i0.ɵɵelement(30, \"span\", 5);\n        i0.ɵɵtemplate(31, UserDashboardComponent_span_31_Template, 2, 0, \"span\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(32, \"main\", 16)(33, \"div\", 17);\n        i0.ɵɵtemplate(34, UserDashboardComponent_div_34_Template, 27, 5, \"div\", 18);\n        i0.ɵɵtemplate(35, UserDashboardComponent_div_35_Template, 11, 8, \"div\", 19);\n        i0.ɵɵtemplate(36, UserDashboardComponent_div_36_Template, 6, 1, \"div\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(37, UserDashboardComponent_div_37_Template, 11, 2, \"div\", 21);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"w-20\", ctx.isSidebarCollapsed)(\"w-64\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(ctx.isSidebarCollapsed ? \"chevronRight\" : \"chevronLeft\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"w-8\", ctx.isSidebarCollapsed)(\"h-8\", ctx.isSidebarCollapsed)(\"w-16\", !ctx.isSidebarCollapsed)(\"h-16\", !ctx.isSidebarCollapsed);\n        i0.ɵɵproperty(\"src\", ctx.getUserAvatar(ctx.currentUser || undefined), i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"bg-gray-200\", ctx.currentView === \"home\")(\"dark:bg-gray-700\", ctx.currentView === \"home\")(\"justify-center\", ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"home\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"bg-gray-200\", ctx.currentView === \"profile\")(\"dark:bg-gray-700\", ctx.currentView === \"profile\")(\"justify-center\", ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"user\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"bg-gray-200\", ctx.currentView === \"settings\")(\"dark:bg-gray-700\", ctx.currentView === \"settings\")(\"justify-center\", ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"settings\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"bg-gray-200\", ctx.currentView === \"notifications\")(\"dark:bg-gray-700\", ctx.currentView === \"notifications\")(\"justify-center\", ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"bell\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"bg-gray-200\", ctx.currentView === \"messages\")(\"dark:bg-gray-700\", ctx.currentView === \"messages\")(\"justify-center\", ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"message\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(ctx.isDarkMode ? \"sun\" : \"moon\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"innerHTML\", ctx.getIcon(\"logout\"), i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSidebarCollapsed);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"home\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentView === \"flame\" || ctx.currentView === \"swayam\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpureFunction0(64, _c0).includes(ctx.currentView));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showAssignmentModal);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i3.RouterLink, i4.DatePipe],\n    styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1c2VyLWRhc2hib2FyZC5jb21wb25lbnQuY3NzIn0= */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci91c2VyLWRhc2hib2FyZC91c2VyLWRhc2hib2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSw0S0FBNEsiLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}\nexport { UserDashboardComponent };","map":{"version":3,"names":["ProjectStatus","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","currentUser","name","role","ctx_r7","isDarkMode","ɵɵlistener","UserDashboardComponent_div_34_div_20_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","_r19","p_r17","$implicit","ctx_r18","ɵɵnextContext","ɵɵresetView","navigateTo","platform","id","ɵɵelement","ɵɵclassProp","ɵɵclassMap","ctx_r14","getStatusBadgeClass","color","label","getProgressBarColorClass","ɵɵstyleProp","overallProgress","UserDashboardComponent_div_34_div_26_Template_div_click_0_listener","_r22","p_r20","ctx_r21","ctx_r16","UserDashboardComponent_div_34_Template_div_click_4_listener","_r24","ctx_r23","UserDashboardComponent_div_34_Template_div_click_9_listener","ctx_r25","ɵɵtemplate","UserDashboardComponent_div_34_div_18_Template","UserDashboardComponent_div_34_div_20_Template","UserDashboardComponent_div_34_div_24_Template","UserDashboardComponent_div_34_div_26_Template","ɵɵtextInterpolate1","ctx_r9","split","ɵɵproperty","managedProjects","length","assignedProjects","UserDashboardComponent_div_35_div_6_Template_div_click_0_listener","_r32","p_r30","ctx_r31","selectProject","ctx_r26","currentView","selectedProject","UserDashboardComponent_div_35_div_8_div_22_div_13_button_4_Template_button_click_0_listener","_r43","stage_r34","ctx_r41","openAssignmentModal","ctx_r37","getUserAvatar","user_r44","ɵɵsanitizeUrl","UserDashboardComponent_div_35_div_8_div_22_div_13_div_11_Template_input_change_2_listener","_r47","task_r45","ctx_r46","toggleTask","ctx_r39","canEditStage","isCompleted","ɵɵtextInterpolate2","ɵɵpipeBind1","startDate","endDate","getTaskStatus","UserDashboardComponent_div_35_div_8_div_22_div_13_button_4_Template","UserDashboardComponent_div_35_div_8_div_22_div_13_img_6_Template","UserDashboardComponent_div_35_div_8_div_22_div_13_p_7_Template","UserDashboardComponent_div_35_div_8_div_22_div_13_div_11_Template","UserDashboardComponent_div_35_div_8_div_22_div_13_div_12_Template","ctx_r35","projectManagerId","assignedTeamMembers","tasks","UserDashboardComponent_div_35_div_8_div_22_Template_div_click_1_listener","_r51","ctx_r50","toggleStageSection","UserDashboardComponent_div_35_div_8_div_22_div_13_Template","ctx_r33","progress","isOpen","getIcon","ɵɵsanitizeHtml","UserDashboardComponent_div_35_div_8_div_22_Template","ctx_r27","scenario","projectManager","getUserName","stages","UserDashboardComponent_div_35_div_6_Template","UserDashboardComponent_div_35_div_8_Template","UserDashboardComponent_div_35_ng_template_9_Template","ɵɵtemplateRefExtractor","ctx_r10","getFilteredProjects","_r28","ctx_r11","ɵɵnamespaceSVG","UserDashboardComponent_div_37_div_5_Template_div_click_0_listener","_r56","user_r53","ctx_r55","toggleUserSelection","UserDashboardComponent_div_37_div_5__svg_svg_2_Template","ctx_r52","isUserAssigned","UserDashboardComponent_div_37_Template_div_click_0_listener","_r58","ctx_r57","closeAssignmentModal","UserDashboardComponent_div_37_Template_div_click_1_listener","$event","stopPropagation","UserDashboardComponent_div_37_div_5_Template","UserDashboardComponent_div_37_Template_button_click_7_listener","ctx_r60","UserDashboardComponent_div_37_Template_button_click_9_listener","ctx_r61","saveAssignments","ctx_r12","selectedStageForAssignment","availableUsers","UserDashboardComponent","sanitizer","projectService","router","isSidebarCollapsed","allProjects","showAssignmentModal","selectedUsersForAssignment","ICONS_SVG","home","user","settings","bell","message","logout","sun","moon","chevronLeft","chevronRight","chevronDown","constructor","ngOnInit","loadUser","loadProjects","loadAvailableUsers","userInfo","localStorage","getItem","JSON","parse","navigate","getAssignedProjects","subscribe","next","projects","splitProjects","calculateAllProjectsHealth","error","err","console","getAvailableManagers","users","filter","p","bypassSecurityTrustHtml","page","projectId","find","platformProjects","project","toggleDarkMode","document","documentElement","classList","add","remove","toggleSidebar","task","stage","getStats","total","completed","status","COMPLETED","inProgress","IN_PROGRESS","lagging","LAGGING","map","u","userId","index","indexOf","splice","push","assignUsersToStage","updatedStage","stageIndex","findIndex","s","undefined","includes","some","Date","today","sevenDaysFromNow","setDate","getDate","forEach","AT_RISK","sColor","classes","green","yellow","red","blue","avatar","ɵɵdirectiveInject","i1","DomSanitizer","i2","ProjectService","i3","Router","selectors","decls","vars","consts","template","UserDashboardComponent_Template","rf","ctx","UserDashboardComponent_h2_3_Template","UserDashboardComponent_Template_button_click_4_listener","UserDashboardComponent_div_8_Template","UserDashboardComponent_Template_a_click_10_listener","UserDashboardComponent_span_12_Template","UserDashboardComponent_Template_a_click_13_listener","UserDashboardComponent_span_15_Template","UserDashboardComponent_Template_a_click_16_listener","UserDashboardComponent_span_18_Template","UserDashboardComponent_Template_a_click_19_listener","UserDashboardComponent_span_21_Template","UserDashboardComponent_Template_a_click_22_listener","UserDashboardComponent_span_24_Template","UserDashboardComponent_Template_button_click_26_listener","UserDashboardComponent_span_28_Template","UserDashboardComponent_span_31_Template","UserDashboardComponent_div_34_Template","UserDashboardComponent_div_35_Template","UserDashboardComponent_div_36_Template","UserDashboardComponent_div_37_Template","ɵɵpureFunction0","_c0"],"sources":["/home/deevan/cdl-project-management-system/frontend/src/app/user/user-dashboard/user-dashboard.component.ts","/home/deevan/cdl-project-management-system/frontend/src/app/user/user-dashboard/user-dashboard.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { ProjectService } from '../../shared/services/project.service';\nimport { Project, ProjectStatus } from '../../shared/models/project.model';\nimport { User } from '../../shared/models/user.model';\nimport { AuthService } from '../../shared/services/auth.service';\n\n@Component({\n  selector: 'app-user-dashboard',\n  templateUrl: './user-dashboard.component.html',\n  styleUrls: ['./user-dashboard.component.css']\n})\nexport class UserDashboardComponent implements OnInit {\n  // State variables\n  isDarkMode = false;\n  isSidebarCollapsed = false;\n  currentView: 'home' | 'flame' | 'swayam' | 'profile' | 'settings' | 'notifications' | 'messages' = 'home';\n\n  // Data\n  currentUser: User | null = null;\n  allProjects: Project[] = [];\n  managedProjects: Project[] = [];\n  assignedProjects: Project[] = [];\n  selectedProject: Project | null = null;\n\n  // Assignment UI\n  availableUsers: User[] = [];\n  showAssignmentModal = false;\n  selectedStageForAssignment: any = null;\n  selectedUsersForAssignment: string[] = [];\n\n  // Icons\n  private ICONS_SVG: { [key: string]: string } = {\n    home: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path><polyline points=\"9 22 9 12 15 12 15 22\"></polyline></svg>`,\n    user: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path><circle cx=\"12\" cy=\"7\" r=\"4\"></circle></svg>`,\n    settings: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06-.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>`,\n    bell: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path><path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path></svg>`,\n    message: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path></svg>`,\n    logout: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path><polyline points=\"16 17 21 12 16 7\"></polyline><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line></svg>`,\n    sun: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><circle cx=\"12\" cy=\"12\" r=\"5\"></circle><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line><line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line><line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line><line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line><line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line></svg>`,\n    moon: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5\"><path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path></svg>`,\n    chevronLeft: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-600 dark:text-gray-300\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>`,\n    chevronRight: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-6 h-6 text-gray-600 dark:text-gray-300\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>`,\n    chevronDown: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"w-5 h-5 text-gray-500\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>`\n  };\n\n  constructor(\n    private sanitizer: DomSanitizer,\n    private projectService: ProjectService,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.loadUser();\n    this.loadProjects();\n    this.loadAvailableUsers();\n  }\n\n  loadUser() {\n    const userInfo = localStorage.getItem('userInfo');\n    if (userInfo) {\n      this.currentUser = JSON.parse(userInfo);\n    } else {\n      this.router.navigate(['/auth/login']);\n    }\n  }\n\n  loadProjects() {\n    if (!this.currentUser) return;\n\n    this.projectService.getAssignedProjects(this.currentUser.id).subscribe({\n      next: (projects) => {\n        this.allProjects = projects;\n        this.splitProjects();\n        this.calculateAllProjectsHealth();\n      },\n      error: (err) => console.error('Failed to load projects', err)\n    });\n  }\n\n  loadAvailableUsers() {\n    this.projectService.getAvailableManagers().subscribe({\n      next: (users) => {\n        this.availableUsers = users;\n      },\n      error: (err) => console.error('Failed to load users', err)\n    });\n  }\n\n  splitProjects() {\n    if (!this.currentUser) return;\n\n    this.managedProjects = this.allProjects.filter(p => p.projectManager?.id === this.currentUser?.id);\n    this.assignedProjects = this.allProjects.filter(p => p.projectManager?.id !== this.currentUser?.id);\n  }\n\n  // --- UI Actions ---\n\n  getIcon(name: string): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(this.ICONS_SVG[name] || '');\n  }\n\n  navigateTo(page: any, projectId: string | null = null) {\n    this.currentView = page;\n    if (projectId) {\n      this.selectedProject = this.allProjects.find(p => p.id === projectId) || null;\n    } else {\n      if (page === 'flame' || page === 'swayam') {\n        const platformProjects = this.allProjects.filter(p => p.platform === page);\n        if (platformProjects.length > 0 && (!this.selectedProject || this.selectedProject.platform !== page)) {\n          this.selectedProject = platformProjects[0];\n        }\n      } else {\n        this.selectedProject = null;\n      }\n    }\n  }\n\n  selectProject(project: Project) {\n    this.selectedProject = project;\n  }\n\n  toggleDarkMode() {\n    this.isDarkMode = !this.isDarkMode;\n    if (this.isDarkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }\n\n  toggleSidebar() {\n    this.isSidebarCollapsed = !this.isSidebarCollapsed;\n  }\n\n  toggleTask(task: any) {\n    // Implement task toggle logic with backend\n    // For now, just toggle locally\n    task.isCompleted = !task.isCompleted;\n    this.calculateAllProjectsHealth();\n  }\n\n  toggleStageSection(stage: any) {\n    stage.isOpen = !stage.isOpen;\n  }\n\n  getFilteredProjects(platform: string): Project[] {\n    return this.allProjects.filter(p => p.platform === platform);\n  }\n\n  getStats() {\n    return {\n      total: this.allProjects.length,\n      completed: this.allProjects.filter(p => p.status === ProjectStatus.COMPLETED).length,\n      inProgress: this.allProjects.filter(p => p.status === ProjectStatus.IN_PROGRESS).length,\n      lagging: this.allProjects.filter(p => p.status === ProjectStatus.LAGGING).length\n    };\n  }\n\n  // --- Assignment Logic ---\n\n  openAssignmentModal(stage: any) {\n    this.selectedStageForAssignment = stage;\n    this.selectedUsersForAssignment = stage.assignedTeamMembers?.map((u: User) => u.id) || [];\n    this.showAssignmentModal = true;\n  }\n\n  closeAssignmentModal() {\n    this.showAssignmentModal = false;\n    this.selectedStageForAssignment = null;\n    this.selectedUsersForAssignment = [];\n  }\n\n  toggleUserSelection(userId: string) {\n    const index = this.selectedUsersForAssignment.indexOf(userId);\n    if (index > -1) {\n      this.selectedUsersForAssignment.splice(index, 1);\n    } else {\n      this.selectedUsersForAssignment.push(userId);\n    }\n  }\n\n  saveAssignments() {\n    if (!this.selectedStageForAssignment) return;\n\n    this.projectService.assignUsersToStage(this.selectedStageForAssignment.id, this.selectedUsersForAssignment).subscribe({\n      next: (updatedStage) => {\n        // Update local state\n        const stageIndex = this.selectedProject?.stages?.findIndex(s => s.id === updatedStage.id);\n        if (this.selectedProject && stageIndex !== undefined && stageIndex > -1) {\n          // Refresh project to get full user objects\n          this.loadProjects();\n        }\n        this.closeAssignmentModal();\n      },\n      error: (err) => console.error('Failed to assign users', err)\n    });\n  }\n\n  isUserAssigned(userId: string): boolean {\n    return this.selectedUsersForAssignment.includes(userId);\n  }\n\n  canEditStage(stage: any): boolean {\n    if (!this.currentUser) return false;\n    // PM can always edit\n    if (this.selectedProject?.projectManager?.id === this.currentUser.id) return true;\n    // Assigned users can edit\n    return stage.assignedTeamMembers?.some((u: User) => u.id === this.currentUser?.id);\n  }\n\n  // --- Helpers ---\n\n  getTaskStatus(task: any) {\n    const endDate = new Date(task.endDate);\n    const today = new Date();\n    if (task.isCompleted) return { label: 'Completed', color: 'green' };\n    if (endDate < today) return { label: 'Overdue', color: 'red' };\n\n    const sevenDaysFromNow = new Date();\n    sevenDaysFromNow.setDate(today.getDate() + 7);\n\n    if (endDate <= sevenDaysFromNow) return { label: 'At-Risk', color: 'yellow' };\n    return { label: 'On Track', color: 'green' };\n  }\n\n  calculateAllProjectsHealth() {\n    // Use backend values if available, or calculate locally\n    // For now, relying on backend 'overallProgress' and 'status'\n    this.allProjects.forEach(p => {\n      // Map backend status to UI colors\n      let color = 'blue';\n      if (p.status === ProjectStatus.COMPLETED) color = 'green';\n      if (p.status === ProjectStatus.LAGGING) color = 'red';\n      if (p.status === ProjectStatus.AT_RISK) color = 'yellow';\n\n      p['overallStatus'] = { label: p.status, color };\n\n      // Stage status\n      p.stages?.forEach(stage => {\n        let sColor = 'blue';\n        // map stage status...\n        (stage as any)['status'] = { label: 'On Track', color: 'green' }; // simplified\n      });\n    });\n  }\n\n  getStatusBadgeClass(color: string | undefined): string {\n    const classes: { [key: string]: string } = {\n      green: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      yellow: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',\n      red: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n      blue: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300'\n    };\n    return `px-2.5 py-0.5 text-xs font-medium rounded-full ${classes[color || 'blue']}`;\n  }\n\n  getProgressBarColorClass(color: string | undefined): string {\n    const classes: { [key: string]: string } = {\n      green: 'bg-green-500',\n      yellow: 'bg-yellow-500',\n      red: 'bg-red-500',\n      blue: 'bg-blue-500'\n    };\n    return classes[color || 'blue'];\n  }\n\n  getUserAvatar(user: User | undefined): string {\n    return user?.avatar || 'assets/default-avatar.png';\n  }\n\n  getUserName(user: User | undefined): string {\n    return user?.name || 'Unknown';\n  }\n}","<div class=\"flex h-screen bg-gray-100 dark:bg-gray-950 transition-colors duration-300 font-sans\">\n    \n  <!-- Sidebar -->\n  <div [class.w-20]=\"isSidebarCollapsed\" [class.w-64]=\"!isSidebarCollapsed\" class=\"hidden md:flex flex-col px-4 py-8 bg-white border-r dark:bg-gray-900 dark:border-gray-700 transition-all duration-300\">\n      <div class=\"flex items-center justify-between\">\n          <h2 *ngIf=\"!isSidebarCollapsed\" class=\"text-3xl font-semibold text-gray-800 dark:text-white\">User</h2>\n          <button (click)=\"toggleSidebar()\" class=\"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700\">\n              <span [innerHTML]=\"getIcon(isSidebarCollapsed ? 'chevronRight' : 'chevronLeft')\"></span>\n          </button>\n      </div>\n\n      <div class=\"flex flex-col items-center mt-6 -mx-2 border-t dark:border-gray-700 pt-4\">\n          <img [src]=\"getUserAvatar(currentUser || undefined)\" class=\"rounded-full object-cover ring-2 ring-white dark:ring-gray-800\" [class.w-8]=\"isSidebarCollapsed\" [class.h-8]=\"isSidebarCollapsed\" [class.w-16]=\"!isSidebarCollapsed\" [class.h-16]=\"!isSidebarCollapsed\">\n          <div *ngIf=\"!isSidebarCollapsed\" class=\"mt-2 text-center\">\n              <h4 class=\"font-medium text-gray-800 dark:text-gray-200\">{{ currentUser?.name }}</h4>\n              <p class=\"text-sm text-gray-600 dark:text-gray-400\">{{ currentUser?.role }}</p>\n          </div>\n      </div>\n\n      <nav class=\"flex-1 mt-8 space-y-2\">\n          <a (click)=\"navigateTo('home')\" [class.bg-gray-200]=\"currentView === 'home'\" [class.dark:bg-gray-700]=\"currentView === 'home'\" class=\"flex items-center px-4 py-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 transition-colors\" [class.justify-center]=\"isSidebarCollapsed\">\n              <span [innerHTML]=\"getIcon('home')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-4 font-medium\">Dashboard</span>\n          </a>\n          <a (click)=\"navigateTo('profile')\" [class.bg-gray-200]=\"currentView === 'profile'\" [class.dark:bg-gray-700]=\"currentView === 'profile'\" class=\"flex items-center px-4 py-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 transition-colors\" [class.justify-center]=\"isSidebarCollapsed\">\n              <span [innerHTML]=\"getIcon('user')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-4 font-medium\">Profile</span>\n          </a>\n          <a (click)=\"navigateTo('settings')\" [class.bg-gray-200]=\"currentView === 'settings'\" [class.dark:bg-gray-700]=\"currentView === 'settings'\" class=\"flex items-center px-4 py-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 transition-colors\" [class.justify-center]=\"isSidebarCollapsed\">\n              <span [innerHTML]=\"getIcon('settings')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-4 font-medium\">Settings</span>\n          </a>\n          <a (click)=\"navigateTo('notifications')\" [class.bg-gray-200]=\"currentView === 'notifications'\" [class.dark:bg-gray-700]=\"currentView === 'notifications'\" class=\"flex items-center px-4 py-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 transition-colors\" [class.justify-center]=\"isSidebarCollapsed\">\n              <span [innerHTML]=\"getIcon('bell')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-4 font-medium\">Notifications</span>\n          </a>\n          <a (click)=\"navigateTo('messages')\" [class.bg-gray-200]=\"currentView === 'messages'\" [class.dark:bg-gray-700]=\"currentView === 'messages'\" class=\"flex items-center px-4 py-2 rounded-md cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-400 dark:hover:text-gray-200 transition-colors\" [class.justify-center]=\"isSidebarCollapsed\">\n              <span [innerHTML]=\"getIcon('message')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-4 font-medium\">Messages</span>\n          </a>\n      </nav>\n\n      <div class=\"flex flex-col items-center mt-6 -mx-2\">\n          <button (click)=\"toggleDarkMode()\" class=\"w-full flex items-center justify-center px-4 py-2 mb-2 text-gray-600 bg-gray-100 rounded-lg dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700\">\n              <span [innerHTML]=\"getIcon(isDarkMode ? 'sun' : 'moon')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-2 font-medium\">{{ isDarkMode ? 'Light' : 'Dark' }}</span>\n          </button>\n          <a routerLink=\"/auth/logout\" class=\"w-full flex items-center justify-center px-4 py-2 text-gray-600 bg-gray-100 rounded-lg dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700\">\n              <span [innerHTML]=\"getIcon('logout')\"></span>\n              <span *ngIf=\"!isSidebarCollapsed\" class=\"mx-2 font-medium\">Logout</span>\n          </a>\n      </div>\n  </div>\n\n  <!-- Main Content -->\n  <main class=\"flex-1 flex flex-col overflow-hidden relative\">\n      <div class=\"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-950\">\n          \n          <!-- VIEW: HOME DASHBOARD -->\n          <div *ngIf=\"currentView === 'home'\" class=\"p-6 md:p-8 space-y-8\">\n              <h1 class=\"text-3xl font-bold text-gray-800 dark:text-white\">Welcome, {{ currentUser?.name?.split(' ')[0] }}!</h1>\n              \n              <div class=\"grid grid-cols-1 gap-8 md:grid-cols-2\">\n                  <div (click)=\"navigateTo('flame')\" class=\"p-8 rounded-xl bg-gradient-to-br from-orange-400 to-red-500 text-white shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer\">\n                      <h2 class=\"text-4xl font-bold\">Flame</h2>\n                      <p class=\"mt-2 text-lg opacity-80\">Internal Creative Projects</p>\n                  </div>\n                  <div (click)=\"navigateTo('swayam')\" class=\"p-8 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 text-white shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer\">\n                      <h2 class=\"text-4xl font-bold\">Swayam</h2>\n                      <p class=\"mt-2 text-lg opacity-80\">External Educational Courses</p>\n                  </div>\n              </div>\n\n              <!-- Split View Container -->\n              <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                \n                <!-- Managed Projects -->\n                <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md\">\n                    <h3 class=\"text-xl font-semibold text-gray-800 dark:text-white mb-4 border-b pb-2 border-gray-200 dark:border-gray-700\">\n                        Managed Projects\n                    </h3>\n                    <div *ngIf=\"managedProjects.length === 0\" class=\"text-gray-500 dark:text-gray-400 italic\">\n                        You are not managing any projects.\n                    </div>\n                    <div class=\"space-y-4\">\n                        <div *ngFor=\"let p of managedProjects\" (click)=\"navigateTo(p.platform, p.id)\" class=\"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 cursor-pointer hover:shadow-lg transition-shadow border-l-4 border-blue-500\">\n                            <div class=\"flex items-center justify-between\">\n                                <div class=\"flex items-center gap-3\">\n                                    <div class=\"w-3 h-3 rounded-full\" [class.bg-orange-500]=\"p.platform === 'flame'\" [class.bg-blue-500]=\"p.platform === 'swayam'\"></div>\n                                    <p class=\"font-semibold text-gray-800 dark:text-gray-100\">{{ p.name }}</p>\n                                </div>\n                                <span [class]=\"getStatusBadgeClass(p['overallStatus']?.color)\">{{ p['overallStatus']?.label }}</span>\n                            </div>\n                            <div class=\"mt-3\">\n                                <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                                    <div [class]=\"getProgressBarColorClass(p['overallStatus']?.color)\" class=\"h-2 rounded-full transition-all duration-500\" [style.width.%]=\"p.overallProgress\"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Assigned Projects -->\n                <div class=\"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md\">\n                    <h3 class=\"text-xl font-semibold text-gray-800 dark:text-white mb-4 border-b pb-2 border-gray-200 dark:border-gray-700\">\n                        My Projects\n                    </h3>\n                    <div *ngIf=\"assignedProjects.length === 0\" class=\"text-gray-500 dark:text-gray-400 italic\">\n                        No projects assigned to you yet.\n                    </div>\n                    <div class=\"space-y-4\">\n                        <div *ngFor=\"let p of assignedProjects\" (click)=\"navigateTo(p.platform, p.id)\" class=\"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50 cursor-pointer hover:shadow-lg transition-shadow\">\n                            <div class=\"flex items-center justify-between\">\n                                <div class=\"flex items-center gap-3\">\n                                    <div class=\"w-3 h-3 rounded-full\" [class.bg-orange-500]=\"p.platform === 'flame'\" [class.bg-blue-500]=\"p.platform === 'swayam'\"></div>\n                                    <p class=\"font-semibold text-gray-800 dark:text-gray-100\">{{ p.name }}</p>\n                                </div>\n                                <span [class]=\"getStatusBadgeClass(p['overallStatus']?.color)\">{{ p['overallStatus']?.label }}</span>\n                            </div>\n                            <div class=\"mt-3\">\n                                <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                                    <div [class]=\"getProgressBarColorClass(p['overallStatus']?.color)\" class=\"h-2 rounded-full transition-all duration-500\" [style.width.%]=\"p.overallProgress\"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n              </div>\n          </div>\n\n          <!-- VIEW: PLATFORM WORKSPACES (Flame or Swayam) -->\n          <div *ngIf=\"currentView === 'flame' || currentView === 'swayam'\" class=\"flex h-full\">\n              \n              <!-- Project List (Left Panel) -->\n              <div class=\"w-full md:w-1/3 border-r dark:border-gray-700 flex flex-col h-full\">\n                  <div class=\"p-4 border-b dark:border-gray-700\">\n                      <h2 class=\"text-2xl font-bold capitalize\" [class.text-orange-500]=\"currentView === 'flame'\" [class.text-blue-500]=\"currentView === 'swayam'\">{{ currentView }} Projects</h2>\n                  </div>\n                  <div class=\"flex-grow overflow-y-auto\">\n                      <div *ngFor=\"let p of getFilteredProjects(currentView)\" (click)=\"selectProject(p)\" \n                           class=\"p-4 border-b dark:border-gray-700 cursor-pointer transition-colors\"\n                           [class.bg-orange-500-10]=\"currentView === 'flame' && selectedProject?.id === p.id\"\n                           [class.bg-blue-500-10]=\"currentView === 'swayam' && selectedProject?.id === p.id\"\n                           [class.bg-gray-100]=\"selectedProject?.id === p.id\" \n                           [class.dark:bg-gray-800]=\"selectedProject?.id === p.id\">\n                           \n                          <div class=\"flex justify-between items-center\">\n                              <p class=\"font-semibold text-gray-800 dark:text-gray-100\">{{ p.name }}</p>\n                              <span [class]=\"getStatusBadgeClass(p['overallStatus']?.color)\">{{ p['overallStatus']?.label }}</span>\n                          </div>\n                          <div class=\"mt-2\">\n                              <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                                  <div [class]=\"getProgressBarColorClass(p['overallStatus']?.color)\" class=\"h-2 rounded-full transition-all duration-500\" [style.width.%]=\"p.overallProgress\"></div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n\n              <!-- Project Details (Right Panel) -->\n              <div class=\"hidden md:block md:w-2/3 bg-white dark:bg-gray-800\">\n                  <div *ngIf=\"selectedProject; else noProjectSelected\" class=\"p-6 h-full overflow-y-auto\">\n                      <div class=\"flex justify-between items-start\">\n                          <div>\n                              <h2 class=\"text-3xl font-bold text-gray-800 dark:text-white\">{{ selectedProject.name }}</h2>\n                              <p class=\"text-gray-500 dark:text-gray-400 mt-1\">{{ selectedProject.scenario }}</p>\n                              <div class=\"flex items-center gap-2 mt-3\">\n                                  <img [src]=\"getUserAvatar(selectedProject.projectManager)\" class=\"w-8 h-8 rounded-full object-cover\">\n                                  <div>\n                                      <p class=\"font-semibold text-gray-700 dark:text-gray-200\">{{ getUserName(selectedProject.projectManager) }}</p>\n                                      <p class=\"text-xs text-gray-500 dark:text-gray-400\">Project Manager</p>\n                                  </div>\n                              </div>\n                          </div>\n                          <span [class]=\"getStatusBadgeClass(selectedProject['overallStatus']?.color)\">{{ selectedProject['overallStatus']?.label }}</span>\n                      </div>\n\n                      <div class=\"mt-6\">\n                          <h3 class=\"text-sm font-semibold text-gray-600 dark:text-gray-300 mb-2\">Overall Progress</h3>\n                          <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                              <div [class]=\"getProgressBarColorClass(selectedProject['overallStatus']?.color)\" class=\"h-2 rounded-full transition-all duration-500\" [style.width.%]=\"selectedProject.overallProgress\"></div>\n                          </div>\n                      </div>\n\n                      <div class=\"mt-8 space-y-4\">\n                          <div *ngFor=\"let stage of selectedProject.stages\" class=\"bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\">\n                              <div (click)=\"toggleStageSection(stage)\" class=\"p-4 flex justify-between items-center cursor-pointer\">\n                                  <div>\n                                      <h4 class=\"font-semibold text-lg text-gray-800 dark:text-gray-100\">{{ stage.name }}</h4>\n                                      <div class=\"mt-2 w-32\">\n                                        <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n                                            <div [class]=\"getProgressBarColorClass(stage['status']?.color)\" class=\"h-2 rounded-full\" [style.width.%]=\"stage.progress\"></div>\n                                        </div>\n                                      </div>\n                                  </div>\n                                  <div class=\"flex items-center gap-4\">\n                                      <span [class]=\"getStatusBadgeClass(stage['status']?.color)\">{{ stage['status']?.label }}</span>\n                                      <div class=\"transform transition-transform\" [class.rotate-180]=\"stage.isOpen\">\n                                        <span [innerHTML]=\"getIcon('chevronDown')\"></span>\n                                      </div>\n                                  </div>\n                              </div>\n\n                              <div *ngIf=\"stage.isOpen\" class=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n                                  \n                                  <!-- Assigned Personnel & Edit Button -->\n                                  <div class=\"flex justify-between items-center mb-3\">\n                                      <h5 class=\"font-semibold text-gray-700 dark:text-gray-300\">Assigned Personnel</h5>\n                                      <button *ngIf=\"currentUser?.id === selectedProject.projectManagerId\" \n                                              (click)=\"openAssignmentModal(stage)\"\n                                              class=\"text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition\">\n                                          Assign / Edit Team\n                                      </button>\n                                  </div>\n                                  \n                                  <div class=\"flex items-center -space-x-2 p-3 bg-white dark:bg-gray-800 rounded-md mb-6\">\n                                      <img *ngFor=\"let user of stage.assignedTeamMembers\" [src]=\"getUserAvatar(user)\" [title]=\"user.name\" class=\"w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n                                      <p *ngIf=\"!stage.assignedTeamMembers || stage.assignedTeamMembers.length === 0\" class=\"text-sm text-gray-500 ml-2\">No one assigned</p>\n                                  </div>\n\n                                  <h5 class=\"font-semibold text-gray-700 dark:text-gray-300 mb-3\">Tasks</h5>\n                                  <div class=\"space-y-3\">\n                                      <div *ngFor=\"let task of stage.tasks\" class=\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-md\" [class.opacity-60]=\"!canEditStage(stage)\">\n                                          <div class=\"flex items-center gap-3\">\n                                              <input type=\"checkbox\" [checked]=\"task.isCompleted\" [disabled]=\"!canEditStage(stage)\" (change)=\"toggleTask(task)\" class=\"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50\">\n                                              <p class=\"text-gray-800 dark:text-gray-200\" [class.line-through]=\"task.isCompleted\" [class.text-gray-500]=\"task.isCompleted\">{{ task.name }}</p>\n                                          </div>\n                                          <div class=\"flex items-center gap-4\">\n                                              <p class=\"text-sm text-gray-500 dark:text-gray-400\">{{ task.startDate | date }} - {{ task.endDate | date }}</p>\n                                              <span [class]=\"getStatusBadgeClass(getTaskStatus(task).color)\">{{ getTaskStatus(task).label }}</span>\n                                          </div>\n                                      </div>\n                                      <div *ngIf=\"!stage.tasks || stage.tasks.length === 0\" class=\"text-sm text-gray-500 italic\">\n                                          No tasks in this stage.\n                                      </div>\n                                  </div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n                  <ng-template #noProjectSelected>\n                      <div class=\"h-full flex items-center justify-center\">\n                          <p class=\"text-gray-500 dark:text-gray-400 text-lg\">Select a project</p>\n                      </div>\n                  </ng-template>\n              </div>\n          </div>\n\n          <!-- VIEW: PLACEHOLDER PAGES -->\n          <div *ngIf=\"['profile', 'settings', 'notifications', 'messages'].includes(currentView)\" class=\"p-6 md:p-8\">\n              <h1 class=\"text-3xl font-bold text-gray-800 dark:text-white capitalize\">{{ currentView }}</h1>\n              <div class=\"mt-8 bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md\">\n                  <p class=\"text-gray-600 dark:text-gray-300\">This section is under construction.</p>\n              </div>\n          </div>\n      </div>\n      \n      <!-- Assignment Modal -->\n      <div *ngIf=\"showAssignmentModal\" class=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\" (click)=\"closeAssignmentModal()\">\n          <div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6\" (click)=\"$event.stopPropagation()\">\n              <h3 class=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">Assign Team to {{ selectedStageForAssignment?.name }}</h3>\n              <div class=\"max-h-64 overflow-y-auto space-y-2 mb-6\">\n                  <div *ngFor=\"let user of availableUsers\" \n                       (click)=\"toggleUserSelection(user.id)\"\n                       class=\"flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\n                       [class.bg-blue-50]=\"isUserAssigned(user.id)\"\n                       [class.dark:bg-blue-900]=\"isUserAssigned(user.id)\">\n                      <div class=\"w-5 h-5 border-2 rounded mr-3 flex items-center justify-center\"\n                           [class.border-blue-500]=\"isUserAssigned(user.id)\"\n                           [class.bg-blue-500]=\"isUserAssigned(user.id)\"\n                           [class.border-gray-300]=\"!isUserAssigned(user.id)\">\n                          <svg *ngIf=\"isUserAssigned(user.id)\" class=\"w-3 h-3 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" d=\"M5 13l4 4L19 7\"></path></svg>\n                      </div>\n                      <img [src]=\"getUserAvatar(user)\" class=\"w-8 h-8 rounded-full object-cover mr-3\">\n                      <div>\n                          <p class=\"font-medium text-gray-800 dark:text-white\">{{ user.name }}</p>\n                          <p class=\"text-xs text-gray-500\">{{ user.role }}</p>\n                      </div>\n                  </div>\n              </div>\n              <div class=\"flex justify-end gap-3\">\n                  <button (click)=\"closeAssignmentModal()\" class=\"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\">Cancel</button>\n                  <button (click)=\"saveAssignments()\" class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\">Save Assignments</button>\n              </div>\n          </div>\n      </div>\n\n  </main>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}