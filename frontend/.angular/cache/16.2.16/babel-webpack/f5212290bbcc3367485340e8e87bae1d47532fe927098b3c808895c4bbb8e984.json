{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/project.service\";\nimport * as i3 from \"../../services/auth.service\";\nimport * as i4 from \"../../services/task.service\";\nimport * as i5 from \"../../services/comment.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProjectDetailComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 34);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.startEditingName());\n    });\n    i0.ɵɵtext(4, \" Edit Name \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.project.name);\n  }\n}\nfunction ProjectDetailComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function ProjectDetailComponent_div_5_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.editedProjectName = $event);\n    })(\"keyup.enter\", function ProjectDetailComponent_div_5_Template_input_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.saveProjectName());\n    })(\"keyup.escape\", function ProjectDetailComponent_div_5_Template_input_keyup_escape_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.cancelEditingName());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.saveProjectName());\n    });\n    i0.ɵɵtext(3, \" Save \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_div_5_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.cancelEditingName());\n    });\n    i0.ɵɵtext(5, \" Cancel \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.editedProjectName);\n  }\n}\nfunction ProjectDetailComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 36);\n    i0.ɵɵelement(2, \"img\", 30);\n    i0.ɵɵelementStart(3, \"div\")(4, \"p\", 40);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 41);\n    i0.ɵɵtext(7, \"Project Manager\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.project.projectManager.avatar, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r2.project.projectManager.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.project.projectManager.name);\n  }\n}\nfunction ProjectDetailComponent_div_9_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const manager_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", manager_r18.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", manager_r18.name, \" - \", manager_r18.role, \" \");\n  }\n}\nfunction ProjectDetailComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"p\", 43);\n    i0.ɵɵtext(2, \"Assign a Project Manager:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 44);\n    i0.ɵɵlistener(\"change\", function ProjectDetailComponent_div_9_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.onManagerSelected($event));\n    });\n    i0.ɵɵelementStart(4, \"option\", 45);\n    i0.ɵɵtext(5, \"Select Manager...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ProjectDetailComponent_div_9_option_6_Template, 2, 3, \"option\", 46);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.availableManagers);\n  }\n}\nfunction ProjectDetailComponent_button_13__svg_svg_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 50);\n    i0.ɵɵelement(1, \"path\", 51);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProjectDetailComponent_button_13__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 50);\n    i0.ɵɵelement(1, \"path\", 52);\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"bg-green-600 hover:bg-green-700\": a0,\n    \"bg-gray-400 cursor-not-allowed\": a1,\n    \"bg-blue-600 hover:bg-blue-700\": a2\n  };\n};\nfunction ProjectDetailComponent_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.toggleEditMode());\n    });\n    i0.ɵɵtemplate(1, ProjectDetailComponent_button_13__svg_svg_1_Template, 2, 0, \"svg\", 49);\n    i0.ɵɵtemplate(2, ProjectDetailComponent_button_13__svg_svg_2_Template, 2, 0, \"svg\", 49);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r4.isEditMode && !ctx_r4.hasUnsavedChanges)(\"ngClass\", i0.ɵɵpureFunction3(5, _c0, ctx_r4.isEditMode && ctx_r4.hasUnsavedChanges, ctx_r4.isEditMode && !ctx_r4.hasUnsavedChanges, !ctx_r4.isEditMode));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.isEditMode ? \"Save Changes\" : \"Edit Project\", \" \");\n  }\n}\nfunction ProjectDetailComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.archiveProject());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 13);\n    i0.ɵɵelement(2, \"path\", 54);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 76);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_div_28_div_14_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r37);\n      const stage_r27 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.openTaskModal(stage_r27.id));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 50);\n    i0.ɵɵelement(2, \"path\", 77);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Add Task \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 87);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r38 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵclassProp(\"line-through\", task_r38.isCompleted)(\"text-gray-500\", task_r38.isCompleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", task_r38.name, \" \");\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_input_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 88);\n    i0.ɵɵlistener(\"ngModelChange\", function ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r48);\n      const task_r38 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(task_r38.name = $event);\n    })(\"blur\", function ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_blur_0_listener() {\n      i0.ɵɵrestoreView(_r48);\n      const task_r38 = i0.ɵɵnextContext().$implicit;\n      const ctx_r49 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r49.updateTask(task_r38));\n    })(\"input\", function ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_input_0_listener() {\n      i0.ɵɵrestoreView(_r48);\n      const ctx_r51 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r51.onFieldChange());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r38 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", task_r38.name);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 89);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r38 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, task_r38.endDate, \"MMM d\"), \" \");\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_input_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 90);\n    i0.ɵɵlistener(\"ngModelChange\", function ProjectDetailComponent_div_28_div_14_div_7_input_10_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r56);\n      const task_r38 = i0.ɵɵnextContext().$implicit;\n      const ctx_r54 = i0.ɵɵnextContext(3);\n      task_r38.endDate = $event;\n      ctx_r54.updateTask(task_r38);\n      return i0.ɵɵresetView(ctx_r54.onFieldChange());\n    });\n    i0.ɵɵpipe(1, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r38 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngModel\", i0.ɵɵpipeBind2(1, 1, task_r38.endDate, \"yyyy-MM-dd\"));\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_img_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 91);\n  }\n  if (rf & 2) {\n    const user_r58 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", user_r58.avatar, i0.ɵɵsanitizeUrl)(\"alt\", user_r58.name)(\"title\", user_r58.name);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_select_13_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r60 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", user_r60.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r60.name, \" \");\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_select_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r63 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"select\", 92);\n    i0.ɵɵlistener(\"change\", function ProjectDetailComponent_div_28_div_14_div_7_select_13_Template_select_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r63);\n      const task_r38 = i0.ɵɵnextContext().$implicit;\n      const ctx_r61 = i0.ɵɵnextContext(3);\n      ctx_r61.assignUserToTask(task_r38, $event);\n      return i0.ɵɵresetView(ctx_r61.onFieldChange());\n    });\n    i0.ɵɵelementStart(1, \"option\", 45);\n    i0.ɵɵtext(2, \"Assign...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProjectDetailComponent_div_28_div_14_div_7_select_13_option_3_Template, 2, 2, \"option\", 46);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r38 = i0.ɵɵnextContext().$implicit;\n    const ctx_r44 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"opacity-0\", !ctx_r44.isEditMode && task_r38.assignedTeamMembers.length > 0)(\"group-hover:opacity-100\", !ctx_r44.isEditMode);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r44.availableManagers);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r66 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 78)(1, \"div\", 79)(2, \"input\", 80);\n    i0.ɵɵlistener(\"change\", function ProjectDetailComponent_div_28_div_14_div_7_Template_input_change_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r66);\n      const task_r38 = restoredCtx.$implicit;\n      const ctx_r65 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r65.toggleTaskCompletion(task_r38));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProjectDetailComponent_div_28_div_14_div_7_span_3_Template, 2, 5, \"span\", 81);\n    i0.ɵɵtemplate(4, ProjectDetailComponent_div_28_div_14_div_7_input_4_Template, 1, 1, \"input\", 82);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 9)(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, ProjectDetailComponent_div_28_div_14_div_7_span_9_Template, 3, 4, \"span\", 83);\n    i0.ɵɵtemplate(10, ProjectDetailComponent_div_28_div_14_div_7_input_10_Template, 2, 4, \"input\", 84);\n    i0.ɵɵelementStart(11, \"div\", 72);\n    i0.ɵɵtemplate(12, ProjectDetailComponent_div_28_div_14_div_7_img_12_Template, 1, 3, \"img\", 85);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ProjectDetailComponent_div_28_div_14_div_7_select_13_Template, 4, 5, \"select\", 86);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const task_r38 = ctx.$implicit;\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", task_r38.isCompleted)(\"disabled\", !ctx_r30.canEditTask(task_r38));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r30.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r30.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r30.getStatusBadgeClass(task_r38.status));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 11, task_r38.status));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r30.isEditMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r30.isEditMode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", task_r38.assignedTeamMembers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r30.canManageProject || ctx_r30.isEditMode);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 93);\n    i0.ɵɵtext(1, \" No tasks in this stage yet. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_img_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 94);\n  }\n  if (rf & 2) {\n    const user_r67 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", user_r67.avatar, i0.ɵɵsanitizeUrl)(\"alt\", user_r67.name)(\"title\", user_r67.name);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 95);\n    i0.ɵɵtext(1, \"No one assigned\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_select_16_option_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r69 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", user_r69.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", user_r69.name, \" \");\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_select_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r72 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"select\", 96);\n    i0.ɵɵlistener(\"change\", function ProjectDetailComponent_div_28_div_14_select_16_Template_select_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r72);\n      const stage_r27 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r70 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r70.assignUserToStage(stage_r27, $event));\n    });\n    i0.ɵɵelementStart(1, \"option\", 45);\n    i0.ɵɵtext(2, \"Assign user...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProjectDetailComponent_div_28_div_14_select_16_option_3_Template, 2, 2, \"option\", 46);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r34.availableManagers);\n  }\n}\nfunction ProjectDetailComponent_div_28_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(0, \"div\", 63)(1, \"div\", 16)(2, \"div\", 64)(3, \"h5\", 65);\n    i0.ɵɵtext(4, \"Tasks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ProjectDetailComponent_div_28_div_14_button_5_Template, 4, 0, \"button\", 66);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 67);\n    i0.ɵɵtemplate(7, ProjectDetailComponent_div_28_div_14_div_7_Template, 14, 13, \"div\", 68);\n    i0.ɵɵtemplate(8, ProjectDetailComponent_div_28_div_14_div_8_Template, 2, 0, \"div\", 69);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"h5\", 70);\n    i0.ɵɵtext(11, \"Assigned Stage Personnel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 71)(13, \"div\", 72);\n    i0.ɵɵtemplate(14, ProjectDetailComponent_div_28_div_14_img_14_Template, 1, 3, \"img\", 73);\n    i0.ɵɵtemplate(15, ProjectDetailComponent_div_28_div_14_span_15_Template, 2, 0, \"span\", 74);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, ProjectDetailComponent_div_28_div_14_select_16_Template, 4, 1, \"select\", 75);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const stage_r27 = i0.ɵɵnextContext().$implicit;\n    const ctx_r28 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r28.canManageProject);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", stage_r27.tasks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", stage_r27.tasks.length === 0);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", stage_r27.assignedTeamMembers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", stage_r27.assignedTeamMembers.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r28.canManageProject);\n  }\n}\nfunction ProjectDetailComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r75 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 55)(1, \"div\", 56);\n    i0.ɵɵlistener(\"click\", function ProjectDetailComponent_div_28_Template_div_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r75);\n      const stage_r27 = restoredCtx.$implicit;\n      const ctx_r74 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r74.toggleStage(stage_r27));\n    });\n    i0.ɵɵelementStart(2, \"div\", 2)(3, \"h4\", 57);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 58);\n    i0.ɵɵelement(6, \"div\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 9)(8, \"span\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 59);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 60);\n    i0.ɵɵelement(13, \"path\", 61);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(14, ProjectDetailComponent_div_28_div_14_Template, 17, 6, \"div\", 62);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const stage_r27 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(stage_r27.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r6.getProgressBarClass(stage_r27.status));\n    i0.ɵɵstyleProp(\"width\", stage_r27.progress, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r6.getStatusBadgeClass(stage_r27.status));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 11, stage_r27.status));\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"rotate-180\", stage_r27.isOpen);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", stage_r27.isOpen);\n  }\n}\nfunction ProjectDetailComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 97);\n    i0.ɵɵelement(1, \"img\", 30);\n    i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 98)(4, \"h4\", 99);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 41);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"p\", 100);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const comment_r76 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", comment_r76.user.avatar, i0.ɵɵsanitizeUrl)(\"alt\", comment_r76.user.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(comment_r76.user.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 5, comment_r76.createdAt, \"medium\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(comment_r76.content);\n  }\n}\nfunction ProjectDetailComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 101);\n    i0.ɵɵtext(1, \" No comments yet. Be the first to share your thoughts! \");\n    i0.ɵɵelementEnd();\n  }\n}\nclass ProjectDetailComponent {\n  route;\n  projectService;\n  authService;\n  taskService;\n  commentService;\n  project = null;\n  availableManagers = []; // Restored Input\n  currentUser = null; // Restored Input\n  projectUpdated = new EventEmitter();\n  projectDeleted = new EventEmitter();\n  taskModalRequested = new EventEmitter();\n  isEditingName = false;\n  editedProjectName = '';\n  isEditMode = false; // Global edit mode for the project\n  hasUnsavedChanges = false; // Track if changes were made\n  selectedManagerId = '';\n  comments = [];\n  newCommentContent = '';\n  constructor(route, projectService, authService, taskService, commentService) {\n    this.route = route;\n    this.projectService = projectService;\n    this.authService = authService;\n    this.taskService = taskService;\n    this.commentService = commentService;\n  }\n  ngOnInit() {\n    if (this.project) {\n      this.editedProjectName = this.project.name;\n      this.loadComments();\n    }\n  }\n  ngOnChanges(changes) {\n    if (changes['project'] && this.project) {\n      this.editedProjectName = this.project.name;\n      this.loadComments();\n    }\n  }\n  loadComments() {\n    if (!this.project) return;\n    this.commentService.getComments(this.project.id).subscribe({\n      next: comments => this.comments = comments,\n      error: err => console.error('Error loading comments:', err)\n    });\n  }\n  postComment() {\n    if (!this.project || !this.newCommentContent.trim()) return;\n    this.commentService.createComment(this.project.id, this.newCommentContent).subscribe({\n      next: comment => {\n        this.loadComments();\n        this.newCommentContent = '';\n      },\n      error: err => console.error('Error posting comment:', err)\n    });\n  }\n  toggleEditMode() {\n    if (this.isEditMode) {\n      // Save changes\n      this.saveChanges();\n      this.isEditMode = false;\n    } else {\n      this.isEditMode = true;\n      this.hasUnsavedChanges = false; // Reset on enter\n    }\n  }\n\n  onFieldChange() {\n    this.hasUnsavedChanges = true;\n  }\n  saveChanges() {\n    console.log('Exiting edit mode');\n  }\n  startEditingName() {\n    // Admins or PMs can edit project name\n    if (!this.canManageProject) {\n      console.log('Only admins or PMs can edit project name');\n      return;\n    }\n    this.isEditingName = true;\n    this.editedProjectName = this.project?.name || '';\n  }\n  saveProjectName() {\n    if (this.project && this.editedProjectName.trim() && this.editedProjectName !== this.project.name) {\n      this.projectService.updateProject(this.project.id, {\n        name: this.editedProjectName\n      }).subscribe({\n        next: updatedProject => {\n          this.project = updatedProject;\n          this.projectUpdated.emit(updatedProject);\n          this.isEditingName = false;\n        },\n        error: error => console.error('Error updating project name:', error)\n      });\n    } else {\n      this.isEditingName = false;\n    }\n  }\n  cancelEditingName() {\n    this.isEditingName = false;\n    this.editedProjectName = this.project?.name || '';\n  }\n  onManagerSelected(event) {\n    const managerId = event.target.value;\n    if (managerId) {\n      this.assignProjectManager(managerId);\n    }\n  }\n  assignProjectManager(managerId) {\n    if (!this.project) return;\n    this.projectService.assignProjectManager(this.project.id, managerId).subscribe({\n      next: updatedProject => {\n        this.project = updatedProject;\n        this.projectUpdated.emit(updatedProject);\n        this.selectedManagerId = '';\n      },\n      error: error => console.error('Error assigning manager:', error)\n    });\n  }\n  deleteProject() {\n    if (!this.project) return;\n    if (confirm('Are you sure you want to delete this project? This action cannot be undone.')) {\n      this.projectService.deleteProject(this.project.id).subscribe({\n        next: () => {\n          if (this.project) this.projectDeleted.emit(this.project.id);\n        },\n        error: error => console.error('Error deleting project:', error)\n      });\n    }\n  }\n  archiveProject() {\n    if (!this.project) return;\n    if (confirm('Are you sure you want to archive this project?')) {\n      this.projectService.updateProject(this.project.id, {\n        archived: true\n      }).subscribe({\n        next: updatedProject => {\n          this.project = updatedProject;\n          this.projectUpdated.emit(updatedProject);\n        },\n        error: error => console.error('Error archiving project:', error)\n      });\n    }\n  }\n  toggleStage(stage) {\n    stage.isOpen = !stage.isOpen;\n  }\n  openTaskModal(stageId) {\n    this.taskModalRequested.emit(stageId);\n  }\n  assignUserToStage(stage, event) {\n    const userId = event.target.value;\n    if (userId && this.project) {\n      this.projectService.assignUsersToStage(stage.id, [userId]).subscribe({\n        next: updatedStage => {\n          if (this.project) {\n            const stageIndex = this.project.stages.findIndex(s => s.id === stage.id);\n            if (stageIndex !== -1) {\n              const user = this.availableManagers.find(u => u.id === userId);\n              if (user && !stage.assignedTeamMembers.find(u => u.id === userId)) {\n                stage.assignedTeamMembers.push(user);\n              }\n            }\n          }\n          event.target.value = '';\n        },\n        error: error => console.error('Error assigning user to stage:', error)\n      });\n    }\n  }\n  assignUserToTask(task, event) {\n    const userId = event.target.value;\n    if (userId && this.project) {\n      this.taskService.assignUserToTask(task.id, userId).subscribe({\n        next: updatedTask => {\n          if (this.project) {\n            const stage = this.project.stages.find(s => s.id === task.stageId);\n            if (stage) {\n              const taskIndex = stage.tasks.findIndex(t => t.id === task.id);\n              if (taskIndex !== -1) {\n                stage.tasks[taskIndex] = updatedTask;\n              }\n            }\n          }\n          event.target.value = '';\n        },\n        error: error => console.error('Error assigning user to task:', error)\n      });\n    }\n  }\n  toggleTaskCompletion(task) {\n    const newStatus = !task.isCompleted;\n    this.taskService.updateTaskStatus(task.id, newStatus ? 'completed' : 'on_track', newStatus).subscribe({\n      next: updatedTask => {\n        if (this.project) {\n          const stage = this.project.stages.find(s => s.id === task.stageId);\n          if (stage) {\n            const taskIndex = stage.tasks.findIndex(t => t.id === task.id);\n            if (taskIndex !== -1) {\n              stage.tasks[taskIndex] = updatedTask;\n            }\n          }\n          this.projectService.calculateProjectHealth(this.project.id).subscribe();\n        }\n      },\n      error: error => console.error('Error updating task status:', error)\n    });\n  }\n  getStatusColor(status) {\n    const colors = {\n      'on_track': 'green',\n      'at_risk': 'yellow',\n      'overdue': 'red',\n      'completed': 'green',\n      'setup': 'blue',\n      'in_progress': 'blue',\n      'lagging': 'red'\n    };\n    return colors[status] || 'gray';\n  }\n  getStatusBadgeClass(status) {\n    if (!status) return 'bg-gray-100 text-gray-800';\n    const normalizedStatus = status.toLowerCase().replace(' ', '_');\n    const colors = {\n      'on_track': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      'at_risk': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',\n      'overdue': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n      'completed': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      'setup': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n      'in_progress': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n      'lagging': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'\n    };\n    return `px-2.5 py-0.5 text-xs font-medium rounded-full ${colors[normalizedStatus] || 'bg-gray-100 text-gray-800'}`;\n  }\n  getProgressBarClass(status) {\n    const colors = {\n      'on_track': 'bg-green-500',\n      'at_risk': 'bg-orange-500',\n      'overdue': 'bg-red-500',\n      'completed': 'bg-green-600',\n      'setup': 'bg-blue-500',\n      'in_progress': 'bg-blue-500',\n      'lagging': 'bg-red-600'\n    };\n    return `h-4 rounded-full transition-all duration-500 ${colors[status] || 'bg-gray-500'}`;\n  }\n  formatStatus(status) {\n    return status.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n  updateTask(task) {\n    if (!task) return;\n    this.taskService.updateTask(task.id, {\n      name: task.name,\n      endDate: task.endDate\n    }).subscribe({\n      next: updated => {\n        console.log('Task updated:', updated);\n      },\n      error: err => console.error('Failed to update task:', err)\n    });\n  }\n  canEditTask(task) {\n    if (!this.currentUser) return false;\n    if (this.currentUser.role === 'admin' || this.currentUser.id === this.project?.projectManager?.id) return true;\n    return task.assignedTeamMembers?.some(u => u.id === this.currentUser?.id) || false;\n  }\n  get canManageProject() {\n    if (!this.currentUser) return false;\n    return this.currentUser.role === 'admin' || this.currentUser.id === this.project?.projectManager?.id;\n  }\n  static ɵfac = function ProjectDetailComponent_Factory(t) {\n    return new (t || ProjectDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProjectService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.TaskService), i0.ɵɵdirectiveInject(i5.CommentService));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProjectDetailComponent,\n    selectors: [[\"app-project-detail\"]],\n    inputs: {\n      project: \"project\",\n      availableManagers: \"availableManagers\",\n      currentUser: \"currentUser\"\n    },\n    outputs: {\n      projectUpdated: \"projectUpdated\",\n      projectDeleted: \"projectDeleted\",\n      taskModalRequested: \"taskModalRequested\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 42,\n    vars: 22,\n    consts: [[1, \"p-6\", \"h-full\", \"overflow-y-auto\"], [1, \"flex\", \"justify-between\", \"items-start\", \"mb-6\"], [1, \"flex-1\"], [1, \"flex\", \"items-center\", \"gap-4\", \"mb-4\"], [4, \"ngIf\"], [\"class\", \"flex items-center gap-2\", 4, \"ngIf\"], [1, \"text-gray-500\", \"dark:text-gray-400\", \"mb-4\"], [\"class\", \"flex items-center gap-4 mb-4\", 4, \"ngIf\"], [\"class\", \"mb-4\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"gap-4\"], [\"class\", \"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors shadow-sm flex items-center gap-2\", 3, \"disabled\", \"ngClass\", \"click\", 4, \"ngIf\"], [\"class\", \"p-2 text-gray-500 rounded-full hover:bg-yellow-100 hover:text-yellow-600 dark:hover:bg-yellow-900/50 dark:hover:text-yellow-400 transition\", \"title\", \"Archive Project\", 3, \"click\", 4, \"ngIf\"], [\"title\", \"Delete Project\", 1, \"p-2\", \"text-gray-500\", \"rounded-full\", \"hover:bg-red-100\", \"hover:text-red-600\", \"dark:hover:bg-red-900/50\", \"dark:hover:text-red-400\", \"transition\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-5\", \"w-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 2 0 00-1 1v3M4 7h16\"], [1, \"mb-8\"], [1, \"mb-6\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-2\"], [1, \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\"], [1, \"text-sm\", \"font-bold\", \"text-gray-900\", \"dark:text-white\"], [1, \"w-full\", \"bg-gray-200\", \"dark:bg-gray-700\", \"rounded-full\", \"h-4\"], [1, \"h-4\", \"rounded-full\", \"transition-all\", \"duration-500\"], [1, \"space-y-6\"], [\"class\", \"bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\", 4, \"ngFor\", \"ngForOf\"], [1, \"mt-8\", \"border-t\", \"border-gray-200\", \"dark:border-gray-700\", \"pt-6\"], [1, \"text-xl\", \"font-bold\", \"text-gray-800\", \"dark:text-white\", \"mb-4\"], [1, \"space-y-4\", \"mb-6\"], [\"class\", \"flex gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center text-gray-500 dark:text-gray-400 py-4\", 4, \"ngIf\"], [1, \"flex\", \"gap-4\", \"items-start\"], [1, \"w-10\", \"h-10\", \"rounded-full\", \"object-cover\", \"ring-2\", \"ring-white\", \"dark:ring-gray-800\", 3, \"src\", \"alt\"], [\"placeholder\", \"Add a comment...\", \"rows\", \"3\", 1, \"w-full\", \"p-3\", \"border\", \"border-gray-300\", \"rounded-lg\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-800\", \"dark:border-gray-700\", \"dark:text-white\", \"resize-none\", 3, \"ngModel\", \"ngModelChange\"], [1, \"flex\", \"justify-end\", \"mt-2\"], [1, \"px-4\", \"py-2\", \"bg-blue-600\", \"text-white\", \"rounded-md\", \"hover:bg-blue-700\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", \"transition-colors\", 3, \"disabled\", \"click\"], [1, \"text-3xl\", \"font-bold\", \"text-gray-800\", \"dark:text-white\"], [1, \"text-sm\", \"text-blue-600\", \"dark:text-blue-400\", \"hover:underline\", \"mt-1\", 3, \"click\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"text-3xl\", \"font-bold\", \"bg-transparent\", \"border-b-2\", \"border-blue-500\", \"focus:outline-none\", \"text-gray-800\", \"dark:text-white\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\", \"keyup.escape\"], [1, \"px-3\", \"py-1\", \"text-sm\", \"bg-green-500\", \"text-white\", \"rounded\", \"hover:bg-green-600\", 3, \"click\"], [1, \"px-3\", \"py-1\", \"text-sm\", \"bg-gray-500\", \"text-white\", \"rounded\", \"hover:bg-gray-600\", 3, \"click\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-200\"], [1, \"text-xs\", \"text-gray-500\", \"dark:text-gray-400\"], [1, \"mb-4\"], [1, \"text-sm\", \"text-gray-600\", \"dark:text-gray-300\", \"mb-2\"], [1, \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"bg-white\", \"dark:bg-gray-700\", \"text-gray-800\", \"dark:text-white\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"px-4\", \"py-2\", \"text-sm\", \"font-medium\", \"text-white\", \"rounded-md\", \"transition-colors\", \"shadow-sm\", \"flex\", \"items-center\", \"gap-2\", 3, \"disabled\", \"ngClass\", \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"class\", \"h-4 w-4\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-4\", \"w-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M5 13l4 4L19 7\"], [\"title\", \"Archive Project\", 1, \"p-2\", \"text-gray-500\", \"rounded-full\", \"hover:bg-yellow-100\", \"hover:text-yellow-600\", \"dark:hover:bg-yellow-900/50\", \"dark:hover:text-yellow-400\", \"transition\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\"], [1, \"bg-gray-50\", \"dark:bg-gray-900/50\", \"rounded-lg\", \"border\", \"border-gray-200\", \"dark:border-gray-700\"], [1, \"p-4\", \"flex\", \"justify-between\", \"items-center\", \"cursor-pointer\", \"hover:bg-gray-100\", \"dark:hover:bg-gray-800/50\", \"transition-colors\", 3, \"click\"], [1, \"font-semibold\", \"text-lg\", \"text-gray-800\", \"dark:text-gray-100\", \"mb-2\"], [1, \"w-full\", \"bg-gray-200\", \"rounded-full\", \"h-2\", \"dark:bg-gray-700\"], [1, \"transform\", \"transition-transform\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", 1, \"h-5\", \"w-5\", \"text-gray-500\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 9l-7 7-7-7\"], [\"class\", \"p-4 border-t border-gray-200 dark:border-gray-700\", 4, \"ngIf\"], [1, \"p-4\", \"border-t\", \"border-gray-200\", \"dark:border-gray-700\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-4\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-300\"], [\"class\", \"flex items-center gap-1 px-3 py-1 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition\", 3, \"click\", 4, \"ngIf\"], [1, \"space-y-3\"], [\"class\", \"group flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 hover:shadow-sm transition-shadow\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-4 text-gray-500 dark:text-gray-400\", 4, \"ngIf\"], [1, \"font-semibold\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-3\"], [1, \"flex\", \"items-center\", \"justify-between\", \"p-3\", \"bg-white\", \"dark:bg-gray-800\", \"rounded-md\"], [1, \"flex\", \"items-center\", \"-space-x-2\"], [\"class\", \"w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\", 3, \"src\", \"alt\", \"title\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-sm text-gray-500 ml-2\", 4, \"ngIf\"], [\"class\", \"text-sm bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500\", 3, \"change\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"gap-1\", \"px-3\", \"py-1\", \"text-sm\", \"bg-blue-500\", \"text-white\", \"rounded-md\", \"hover:bg-blue-600\", \"transition\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"group\", \"flex\", \"items-center\", \"justify-between\", \"p-3\", \"bg-white\", \"dark:bg-gray-800\", \"rounded-md\", \"border\", \"border-gray-200\", \"dark:border-gray-700\", \"hover:shadow-sm\", \"transition-shadow\"], [1, \"flex\", \"items-center\", \"gap-3\", \"flex-1\"], [\"type\", \"checkbox\", 1, \"h-4\", \"w-4\", \"text-blue-600\", \"rounded\", \"border-gray-300\", \"focus:ring-blue-500\", \"disabled:opacity-50\", \"cursor-pointer\", 3, \"checked\", \"disabled\", \"change\"], [\"class\", \"text-gray-800 dark:text-gray-200 font-medium\", 3, \"line-through\", \"text-gray-500\", 4, \"ngIf\"], [\"class\", \"flex-1 px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-blue-500 focus:border-blue-500\", 3, \"ngModel\", \"ngModelChange\", \"blur\", \"input\", 4, \"ngIf\"], [\"class\", \"text-xs text-gray-500 dark:text-gray-400 hidden sm:block\", 4, \"ngIf\"], [\"type\", \"date\", \"class\", \"text-xs border border-gray-300 rounded px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"w-6 h-6 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\", 3, \"src\", \"alt\", \"title\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-xs bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 rounded focus:ring-blue-500 focus:border-blue-500 py-1 pl-2 pr-6 transition-opacity\", 3, \"opacity-0\", \"group-hover:opacity-100\", \"change\", 4, \"ngIf\"], [1, \"text-gray-800\", \"dark:text-gray-200\", \"font-medium\"], [1, \"flex-1\", \"px-2\", \"py-1\", \"text-sm\", \"border\", \"border-gray-300\", \"rounded\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:text-white\", \"focus:ring-blue-500\", \"focus:border-blue-500\", 3, \"ngModel\", \"ngModelChange\", \"blur\", \"input\"], [1, \"text-xs\", \"text-gray-500\", \"dark:text-gray-400\", \"hidden\", \"sm:block\"], [\"type\", \"date\", 1, \"text-xs\", \"border\", \"border-gray-300\", \"rounded\", \"px-2\", \"py-1\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:text-white\", 3, \"ngModel\", \"ngModelChange\"], [1, \"w-6\", \"h-6\", \"rounded-full\", \"object-cover\", \"ring-2\", \"ring-white\", \"dark:ring-gray-800\", 3, \"src\", \"alt\", \"title\"], [1, \"text-xs\", \"bg-gray-50\", \"dark:bg-gray-700\", \"border-gray-200\", \"dark:border-gray-600\", \"rounded\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"py-1\", \"pl-2\", \"pr-6\", \"transition-opacity\", 3, \"change\"], [1, \"text-center\", \"py-4\", \"text-gray-500\", \"dark:text-gray-400\"], [1, \"w-8\", \"h-8\", \"rounded-full\", \"object-cover\", \"ring-2\", \"ring-white\", \"dark:ring-gray-800\", 3, \"src\", \"alt\", \"title\"], [1, \"text-sm\", \"text-gray-500\", \"ml-2\"], [1, \"text-sm\", \"bg-gray-100\", \"dark:bg-gray-700\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"focus:ring-blue-500\", \"focus:border-blue-500\", 3, \"change\"], [1, \"flex\", \"gap-4\", \"p-4\", \"bg-gray-50\", \"dark:bg-gray-900/50\", \"rounded-lg\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-1\"], [1, \"font-semibold\", \"text-gray-900\", \"dark:text-white\"], [1, \"text-gray-700\", \"dark:text-gray-300\"], [1, \"text-center\", \"text-gray-500\", \"dark:text-gray-400\", \"py-4\"]],\n    template: function ProjectDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵtemplate(4, ProjectDetailComponent_div_4_Template, 5, 1, \"div\", 4);\n        i0.ɵɵtemplate(5, ProjectDetailComponent_div_5_Template, 6, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\", 6);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, ProjectDetailComponent_div_8_Template, 8, 3, \"div\", 7);\n        i0.ɵɵtemplate(9, ProjectDetailComponent_div_9_Template, 7, 1, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 9)(11, \"span\");\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, ProjectDetailComponent_button_13_Template, 4, 9, \"button\", 10);\n        i0.ɵɵtemplate(14, ProjectDetailComponent_button_14_Template, 3, 0, \"button\", 11);\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function ProjectDetailComponent_Template_button_click_15_listener() {\n          return ctx.deleteProject();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(16, \"svg\", 13);\n        i0.ɵɵelement(17, \"path\", 14);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(18, \"div\", 15)(19, \"div\", 16)(20, \"div\", 17)(21, \"span\", 18);\n        i0.ɵɵtext(22, \"Overall Progress\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"span\", 19);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"div\", 20);\n        i0.ɵɵelement(26, \"div\", 21);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(27, \"div\", 22);\n        i0.ɵɵtemplate(28, ProjectDetailComponent_div_28_Template, 15, 13, \"div\", 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 24)(30, \"h3\", 25);\n        i0.ɵɵtext(31, \"Comments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 26);\n        i0.ɵɵtemplate(33, ProjectDetailComponent_div_33_Template, 11, 8, \"div\", 27);\n        i0.ɵɵtemplate(34, ProjectDetailComponent_div_34_Template, 2, 0, \"div\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 29);\n        i0.ɵɵelement(36, \"img\", 30);\n        i0.ɵɵelementStart(37, \"div\", 2)(38, \"textarea\", 31);\n        i0.ɵɵlistener(\"ngModelChange\", function ProjectDetailComponent_Template_textarea_ngModelChange_38_listener($event) {\n          return ctx.newCommentContent = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 32)(40, \"button\", 33);\n        i0.ɵɵlistener(\"click\", function ProjectDetailComponent_Template_button_click_40_listener() {\n          return ctx.postComment();\n        });\n        i0.ɵɵtext(41, \" Post Comment \");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isEditingName);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isEditingName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.project.scenario);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.project.projectManager);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.project.projectManager && ctx.availableManagers.length > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassMap(ctx.getStatusBadgeClass(ctx.project.status));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.formatStatus(ctx.project.status));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.canManageProject);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentUser && ctx.currentUser.role === \"admin\");\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\"\", ctx.project.overallProgress, \"%\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassMap(ctx.getProgressBarClass(ctx.project.status));\n        i0.ɵɵstyleProp(\"width\", ctx.project.overallProgress, \"%\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.project.stages);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.comments);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.comments.length === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"src\", ctx.currentUser == null ? null : ctx.currentUser.avatar, i0.ɵɵsanitizeUrl)(\"alt\", ctx.currentUser == null ? null : ctx.currentUser.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.newCommentContent);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.newCommentContent.trim());\n      }\n    },\n    dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i6.TitleCasePipe, i6.DatePipe],\n    styles: [\"\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n\\n \\t\\\"use strict\\\";\\n\\n \\t\\n\\n \\t\\n\\n })()[_ngcontent-%COMP%]\\n;\"]\n  });\n}\nexport { ProjectDetailComponent };","map":{"version":3,"names":["EventEmitter","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ProjectDetailComponent_div_4_Template_button_click_3_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","startEditingName","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","project","name","ProjectDetailComponent_div_5_Template_input_ngModelChange_1_listener","$event","_r12","ctx_r11","editedProjectName","ProjectDetailComponent_div_5_Template_input_keyup_enter_1_listener","ctx_r13","saveProjectName","ProjectDetailComponent_div_5_Template_input_keyup_escape_1_listener","ctx_r14","cancelEditingName","ProjectDetailComponent_div_5_Template_button_click_2_listener","ctx_r15","ProjectDetailComponent_div_5_Template_button_click_4_listener","ctx_r16","ɵɵproperty","ctx_r1","ɵɵelement","ctx_r2","projectManager","avatar","ɵɵsanitizeUrl","manager_r18","id","ɵɵtextInterpolate2","role","ProjectDetailComponent_div_9_Template_select_change_3_listener","_r20","ctx_r19","onManagerSelected","ɵɵtemplate","ProjectDetailComponent_div_9_option_6_Template","ctx_r3","availableManagers","ɵɵnamespaceSVG","ProjectDetailComponent_button_13_Template_button_click_0_listener","_r24","ctx_r23","toggleEditMode","ProjectDetailComponent_button_13__svg_svg_1_Template","ProjectDetailComponent_button_13__svg_svg_2_Template","ctx_r4","isEditMode","hasUnsavedChanges","ɵɵpureFunction3","_c0","ɵɵtextInterpolate1","ProjectDetailComponent_button_14_Template_button_click_0_listener","_r26","ctx_r25","archiveProject","ProjectDetailComponent_div_28_div_14_button_5_Template_button_click_0_listener","_r37","stage_r27","$implicit","ctx_r35","openTaskModal","ɵɵclassProp","task_r38","isCompleted","ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_ngModelChange_0_listener","_r48","ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_blur_0_listener","ctx_r49","updateTask","ProjectDetailComponent_div_28_div_14_div_7_input_4_Template_input_input_0_listener","ctx_r51","onFieldChange","ɵɵpipeBind2","endDate","ProjectDetailComponent_div_28_div_14_div_7_input_10_Template_input_ngModelChange_0_listener","_r56","ctx_r54","user_r58","user_r60","ProjectDetailComponent_div_28_div_14_div_7_select_13_Template_select_change_0_listener","_r63","ctx_r61","assignUserToTask","ProjectDetailComponent_div_28_div_14_div_7_select_13_option_3_Template","ctx_r44","assignedTeamMembers","length","ProjectDetailComponent_div_28_div_14_div_7_Template_input_change_2_listener","restoredCtx","_r66","ctx_r65","toggleTaskCompletion","ProjectDetailComponent_div_28_div_14_div_7_span_3_Template","ProjectDetailComponent_div_28_div_14_div_7_input_4_Template","ProjectDetailComponent_div_28_div_14_div_7_span_9_Template","ProjectDetailComponent_div_28_div_14_div_7_input_10_Template","ProjectDetailComponent_div_28_div_14_div_7_img_12_Template","ProjectDetailComponent_div_28_div_14_div_7_select_13_Template","ctx_r30","canEditTask","ɵɵclassMap","getStatusBadgeClass","status","ɵɵpipeBind1","canManageProject","user_r67","user_r69","ProjectDetailComponent_div_28_div_14_select_16_Template_select_change_0_listener","_r72","ctx_r70","assignUserToStage","ProjectDetailComponent_div_28_div_14_select_16_option_3_Template","ctx_r34","ɵɵnamespaceHTML","ProjectDetailComponent_div_28_div_14_button_5_Template","ProjectDetailComponent_div_28_div_14_div_7_Template","ProjectDetailComponent_div_28_div_14_div_8_Template","ProjectDetailComponent_div_28_div_14_img_14_Template","ProjectDetailComponent_div_28_div_14_span_15_Template","ProjectDetailComponent_div_28_div_14_select_16_Template","ctx_r28","tasks","ProjectDetailComponent_div_28_Template_div_click_1_listener","_r75","ctx_r74","toggleStage","ProjectDetailComponent_div_28_div_14_Template","ctx_r6","getProgressBarClass","ɵɵstyleProp","progress","isOpen","comment_r76","user","createdAt","content","ProjectDetailComponent","route","projectService","authService","taskService","commentService","currentUser","projectUpdated","projectDeleted","taskModalRequested","isEditingName","selectedManagerId","comments","newCommentContent","constructor","ngOnInit","loadComments","ngOnChanges","changes","getComments","subscribe","next","error","err","console","postComment","trim","createComment","comment","saveChanges","log","updateProject","updatedProject","emit","event","managerId","target","value","assignProjectManager","deleteProject","confirm","archived","stage","stageId","userId","assignUsersToStage","updatedStage","stageIndex","stages","findIndex","s","find","u","push","task","updatedTask","taskIndex","t","newStatus","updateTaskStatus","calculateProjectHealth","getStatusColor","colors","normalizedStatus","toLowerCase","replace","formatStatus","l","toUpperCase","updated","some","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ProjectService","i3","AuthService","i4","TaskService","i5","CommentService","selectors","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","ProjectDetailComponent_Template","rf","ctx","ProjectDetailComponent_div_4_Template","ProjectDetailComponent_div_5_Template","ProjectDetailComponent_div_8_Template","ProjectDetailComponent_div_9_Template","ProjectDetailComponent_button_13_Template","ProjectDetailComponent_button_14_Template","ProjectDetailComponent_Template_button_click_15_listener","ProjectDetailComponent_div_28_Template","ProjectDetailComponent_div_33_Template","ProjectDetailComponent_div_34_Template","ProjectDetailComponent_Template_textarea_ngModelChange_38_listener","ProjectDetailComponent_Template_button_click_40_listener","scenario","overallProgress"],"sources":["/home/deevan/cdl-project-management-system/frontend/src/app/shared/components/project-detail/project-detail.component.ts","/home/deevan/cdl-project-management-system/frontend/src/app/shared/components/project-detail/project-detail.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Project, ProjectStage, Task } from '../../models/project.model';\nimport { User } from '../../models/user.model';\nimport { Comment } from '../../models/comment.model';\nimport { ProjectService } from '../../services/project.service';\nimport { AuthService } from '../../services/auth.service';\nimport { TaskService } from '../../services/task.service';\nimport { CommentService } from '../../services/comment.service';\n\n@Component({\n  selector: 'app-project-detail',\n  templateUrl: './project-detail.component.html',\n  styleUrls: ['./project-detail.component.scss']\n})\nexport class ProjectDetailComponent implements OnInit, OnChanges {\n  @Input() project: Project | null = null;\n  @Input() availableManagers: User[] = []; // Restored Input\n  @Input() currentUser: User | null = null; // Restored Input\n  @Output() projectUpdated = new EventEmitter<Project>();\n  @Output() projectDeleted = new EventEmitter<string>();\n  @Output() taskModalRequested = new EventEmitter<string>();\n\n  isEditingName = false;\n  editedProjectName = '';\n  isEditMode = false; // Global edit mode for the project\n  hasUnsavedChanges = false; // Track if changes were made\n  selectedManagerId = '';\n\n  comments: Comment[] = [];\n  newCommentContent = '';\n\n  constructor(\n    private route: ActivatedRoute,\n    private projectService: ProjectService,\n    private authService: AuthService,\n    private taskService: TaskService,\n    private commentService: CommentService\n  ) { }\n\n  ngOnInit() {\n    if (this.project) {\n      this.editedProjectName = this.project.name;\n      this.loadComments();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['project'] && this.project) {\n      this.editedProjectName = this.project.name;\n      this.loadComments();\n    }\n  }\n\n  loadComments() {\n    if (!this.project) return;\n    this.commentService.getComments(this.project.id).subscribe({\n      next: (comments) => this.comments = comments,\n      error: (err) => console.error('Error loading comments:', err)\n    });\n  }\n\n  postComment() {\n    if (!this.project || !this.newCommentContent.trim()) return;\n\n    this.commentService.createComment(this.project.id, this.newCommentContent).subscribe({\n      next: (comment) => {\n        this.loadComments();\n        this.newCommentContent = '';\n      },\n      error: (err) => console.error('Error posting comment:', err)\n    });\n  }\n\n  toggleEditMode() {\n    if (this.isEditMode) {\n      // Save changes\n      this.saveChanges();\n      this.isEditMode = false;\n    } else {\n      this.isEditMode = true;\n      this.hasUnsavedChanges = false; // Reset on enter\n    }\n  }\n\n  onFieldChange() {\n    this.hasUnsavedChanges = true;\n  }\n\n  saveChanges() {\n    console.log('Exiting edit mode');\n  }\n\n  startEditingName() {\n    // Admins or PMs can edit project name\n    if (!this.canManageProject) {\n      console.log('Only admins or PMs can edit project name');\n      return;\n    }\n    this.isEditingName = true;\n    this.editedProjectName = this.project?.name || '';\n  }\n\n  saveProjectName() {\n    if (this.project && this.editedProjectName.trim() && this.editedProjectName !== this.project.name) {\n      this.projectService.updateProject(this.project.id, { name: this.editedProjectName })\n        .subscribe({\n          next: (updatedProject) => {\n            this.project = updatedProject;\n            this.projectUpdated.emit(updatedProject);\n            this.isEditingName = false;\n          },\n          error: (error) => console.error('Error updating project name:', error)\n        });\n    } else {\n      this.isEditingName = false;\n    }\n  }\n\n  cancelEditingName() {\n    this.isEditingName = false;\n    this.editedProjectName = this.project?.name || '';\n  }\n\n  onManagerSelected(event: any) {\n    const managerId = event.target.value;\n    if (managerId) {\n      this.assignProjectManager(managerId);\n    }\n  }\n\n  assignProjectManager(managerId: string) {\n    if (!this.project) return;\n    this.projectService.assignProjectManager(this.project.id, managerId)\n      .subscribe({\n        next: (updatedProject) => {\n          this.project = updatedProject;\n          this.projectUpdated.emit(updatedProject);\n          this.selectedManagerId = '';\n        },\n        error: (error) => console.error('Error assigning manager:', error)\n      });\n  }\n\n  deleteProject() {\n    if (!this.project) return;\n    if (confirm('Are you sure you want to delete this project? This action cannot be undone.')) {\n      this.projectService.deleteProject(this.project.id)\n        .subscribe({\n          next: () => {\n            if (this.project) this.projectDeleted.emit(this.project.id);\n          },\n          error: (error) => console.error('Error deleting project:', error)\n        });\n    }\n  }\n\n  archiveProject() {\n    if (!this.project) return;\n    if (confirm('Are you sure you want to archive this project?')) {\n      this.projectService.updateProject(this.project.id, { archived: true } as any)\n        .subscribe({\n          next: (updatedProject) => {\n            this.project = updatedProject;\n            this.projectUpdated.emit(updatedProject);\n          },\n          error: (error) => console.error('Error archiving project:', error)\n        });\n    }\n  }\n\n  toggleStage(stage: ProjectStage) {\n    stage.isOpen = !stage.isOpen;\n  }\n\n  openTaskModal(stageId: string) {\n    this.taskModalRequested.emit(stageId);\n  }\n\n  assignUserToStage(stage: ProjectStage, event: any) {\n    const userId = event.target.value;\n    if (userId && this.project) {\n      this.projectService.assignUsersToStage(stage.id, [userId])\n        .subscribe({\n          next: (updatedStage) => {\n            if (this.project) {\n              const stageIndex = this.project.stages.findIndex(s => s.id === stage.id);\n              if (stageIndex !== -1) {\n                const user = this.availableManagers.find(u => u.id === userId);\n                if (user && !stage.assignedTeamMembers.find(u => u.id === userId)) {\n                  stage.assignedTeamMembers.push(user);\n                }\n              }\n            }\n            event.target.value = '';\n          },\n          error: (error) => console.error('Error assigning user to stage:', error)\n        });\n    }\n  }\n\n  assignUserToTask(task: Task, event: any) {\n    const userId = event.target.value;\n    if (userId && this.project) {\n      this.taskService.assignUserToTask(task.id, userId)\n        .subscribe({\n          next: (updatedTask) => {\n            if (this.project) {\n              const stage = this.project.stages.find(s => s.id === task.stageId);\n              if (stage) {\n                const taskIndex = stage.tasks.findIndex(t => t.id === task.id);\n                if (taskIndex !== -1) {\n                  stage.tasks[taskIndex] = updatedTask;\n                }\n              }\n            }\n            event.target.value = '';\n          },\n          error: (error) => console.error('Error assigning user to task:', error)\n        });\n    }\n  }\n\n  toggleTaskCompletion(task: Task) {\n    const newStatus = !task.isCompleted;\n    this.taskService.updateTaskStatus(task.id,\n      newStatus ? 'completed' : 'on_track' as any,\n      newStatus\n    ).subscribe({\n      next: (updatedTask) => {\n        if (this.project) {\n          const stage = this.project.stages.find(s => s.id === task.stageId);\n          if (stage) {\n            const taskIndex = stage.tasks.findIndex(t => t.id === task.id);\n            if (taskIndex !== -1) {\n              stage.tasks[taskIndex] = updatedTask;\n            }\n          }\n          this.projectService.calculateProjectHealth(this.project.id).subscribe();\n        }\n      },\n      error: (error) => console.error('Error updating task status:', error)\n    });\n  }\n\n  getStatusColor(status: string): string {\n    const colors: { [key: string]: string } = {\n      'on_track': 'green',\n      'at_risk': 'yellow',\n      'overdue': 'red',\n      'completed': 'green',\n      'setup': 'blue',\n      'in_progress': 'blue',\n      'lagging': 'red'\n    };\n    return colors[status] || 'gray';\n  }\n\n  getStatusBadgeClass(status: string): string {\n    if (!status) return 'bg-gray-100 text-gray-800';\n    const normalizedStatus = status.toLowerCase().replace(' ', '_');\n    const colors: { [key: string]: string } = {\n      'on_track': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      'at_risk': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',\n      'overdue': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n      'completed': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n      'setup': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n      'in_progress': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n      'lagging': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'\n    };\n    return `px-2.5 py-0.5 text-xs font-medium rounded-full ${colors[normalizedStatus] || 'bg-gray-100 text-gray-800'}`;\n  }\n\n  getProgressBarClass(status: string): string {\n    const colors: { [key: string]: string } = {\n      'on_track': 'bg-green-500',\n      'at_risk': 'bg-orange-500',\n      'overdue': 'bg-red-500',\n      'completed': 'bg-green-600',\n      'setup': 'bg-blue-500',\n      'in_progress': 'bg-blue-500',\n      'lagging': 'bg-red-600'\n    };\n    return `h-4 rounded-full transition-all duration-500 ${colors[status] || 'bg-gray-500'}`;\n  }\n\n  formatStatus(status: string): string {\n    return status.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n  }\n\n  updateTask(task: Task) {\n    if (!task) return;\n    this.taskService.updateTask(task.id, {\n      name: task.name,\n      endDate: task.endDate\n    }).subscribe({\n      next: (updated) => {\n        console.log('Task updated:', updated);\n      },\n      error: (err) => console.error('Failed to update task:', err)\n    });\n  }\n\n  canEditTask(task: Task): boolean {\n    if (!this.currentUser) return false;\n    if (this.currentUser.role === 'admin' || this.currentUser.id === this.project?.projectManager?.id) return true;\n    return task.assignedTeamMembers?.some(u => u.id === this.currentUser?.id) || false;\n  }\n\n  get canManageProject(): boolean {\n    if (!this.currentUser) return false;\n    return this.currentUser.role === 'admin' || this.currentUser.id === this.project?.projectManager?.id;\n  }\n}","<div class=\"p-6 h-full overflow-y-auto\">\n  <!-- Project Header -->\n  <div class=\"flex justify-between items-start mb-6\">\n    <div class=\"flex-1\">\n      <div class=\"flex items-center gap-4 mb-4\">\n        <div *ngIf=\"!isEditingName\">\n          <h2 class=\"text-3xl font-bold text-gray-800 dark:text-white\">{{ project.name }}</h2>\n          <button (click)=\"startEditingName()\" class=\"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-1\">\n            Edit Name\n          </button>\n        </div>\n        <div *ngIf=\"isEditingName\" class=\"flex items-center gap-2\">\n          <input [(ngModel)]=\"editedProjectName\" (keyup.enter)=\"saveProjectName()\" (keyup.escape)=\"cancelEditingName()\"\n            class=\"text-3xl font-bold bg-transparent border-b-2 border-blue-500 focus:outline-none text-gray-800 dark:text-white\">\n          <button (click)=\"saveProjectName()\"\n            class=\"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600\">\n            Save\n          </button>\n          <button (click)=\"cancelEditingName()\"\n            class=\"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600\">\n            Cancel\n          </button>\n        </div>\n      </div>\n\n      <p class=\"text-gray-500 dark:text-gray-400 mb-4\">{{ project.scenario }}</p>\n\n      <!-- Project Manager Section -->\n      <div *ngIf=\"project.projectManager\" class=\"flex items-center gap-4 mb-4\">\n        <div class=\"flex items-center gap-2\">\n          <img [src]=\"project.projectManager.avatar\" [alt]=\"project.projectManager.name\"\n            class=\"w-10 h-10 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n          <div>\n            <p class=\"font-semibold text-gray-700 dark:text-gray-200\">{{ project.projectManager.name }}</p>\n            <p class=\"text-xs text-gray-500 dark:text-gray-400\">Project Manager</p>\n          </div>\n        </div>\n      </div>\n\n      <div *ngIf=\"!project.projectManager && availableManagers.length > 0\" class=\"mb-4\">\n        <p class=\"text-sm text-gray-600 dark:text-gray-300 mb-2\">Assign a Project Manager:</p>\n        <select (change)=\"onManagerSelected($event)\"\n          class=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-white\">\n          <option value=\"\">Select Manager...</option>\n          <option *ngFor=\"let manager of availableManagers\" [value]=\"manager.id\">\n            {{ manager.name }} - {{ manager.role }}\n          </option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"flex items-center gap-4\">\n      <span [class]=\"getStatusBadgeClass(project.status)\">{{ formatStatus(project.status) }}</span>\n\n      <!-- Edit Mode Toggle -->\n      <button *ngIf=\"canManageProject\" (click)=\"toggleEditMode()\" [disabled]=\"isEditMode && !hasUnsavedChanges\"\n        class=\"px-4 py-2 text-sm font-medium text-white rounded-md transition-colors shadow-sm flex items-center gap-2\"\n        [ngClass]=\"{\n          'bg-green-600 hover:bg-green-700': isEditMode && hasUnsavedChanges,\n          'bg-gray-400 cursor-not-allowed': isEditMode && !hasUnsavedChanges,\n          'bg-blue-600 hover:bg-blue-700': !isEditMode\n        }\">\n        <svg *ngIf=\"!isEditMode\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n            d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n        </svg>\n        <svg *ngIf=\"isEditMode\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n        </svg>\n        {{ isEditMode ? 'Save Changes' : 'Edit Project' }}\n      </button>\n\n      <button *ngIf=\"currentUser && currentUser.role === 'admin'\" (click)=\"archiveProject()\"\n        class=\"p-2 text-gray-500 rounded-full hover:bg-yellow-100 hover:text-yellow-600 dark:hover:bg-yellow-900/50 dark:hover:text-yellow-400 transition\"\n        title=\"Archive Project\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n            d=\"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4\" />\n        </svg>\n      </button>\n      <button (click)=\"deleteProject()\"\n        class=\"p-2 text-gray-500 rounded-full hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900/50 dark:hover:text-red-400 transition\"\n        title=\"Delete Project\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 2 0 00-1 1v3M4 7h16\" />\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- Overall Progress -->\n  <div class=\"mb-8\">\n    <div class=\"mb-6\">\n      <div class=\"flex justify-between items-center mb-2\">\n        <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Overall Progress</span>\n        <span class=\"text-sm font-bold text-gray-900 dark:text-white\">{{ project.overallProgress }}%</span>\n      </div>\n      <div class=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4\">\n        <div [class]=\"getProgressBarClass(project.status)\" class=\"h-4 rounded-full transition-all duration-500\"\n          [style.width.%]=\"project.overallProgress\"></div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Stages -->\n  <div class=\"space-y-6\">\n    <div *ngFor=\"let stage of project.stages\"\n      class=\"bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700\">\n      <!-- Stage Header -->\n      <div (click)=\"toggleStage(stage)\"\n        class=\"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors\">\n        <div class=\"flex-1\">\n          <h4 class=\"font-semibold text-lg text-gray-800 dark:text-gray-100 mb-2\">{{ stage.name }}</h4>\n          <div class=\"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700\">\n            <div [class]=\"getProgressBarClass(stage.status)\" [style.width.%]=\"stage.progress\"></div>\n          </div>\n        </div>\n        <div class=\"flex items-center gap-4\">\n          <span [class]=\"getStatusBadgeClass(stage.status)\">{{ stage.status | titlecase }}</span>\n          <span class=\"transform transition-transform\" [class.rotate-180]=\"stage.isOpen\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </span>\n        </div>\n      </div>\n\n      <!-- Stage Content -->\n      <div *ngIf=\"stage.isOpen\" class=\"p-4 border-t border-gray-200 dark:border-gray-700\">\n        <!-- Tasks Section -->\n        <div class=\"mb-6\">\n          <div class=\"flex justify-between items-center mb-4\">\n            <h5 class=\"font-semibold text-gray-700 dark:text-gray-300\">Tasks</h5>\n            <button *ngIf=\"canManageProject\" (click)=\"openTaskModal(stage.id)\"\n              class=\"flex items-center gap-1 px-3 py-1 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\n              </svg>\n              Add Task\n            </button>\n          </div>\n\n          <div class=\"space-y-3\">\n            <div *ngFor=\"let task of stage.tasks\"\n              class=\"group flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700 hover:shadow-sm transition-shadow\">\n\n              <!-- Left: Checkbox & Name -->\n              <div class=\"flex items-center gap-3 flex-1\">\n                <input type=\"checkbox\" [checked]=\"task.isCompleted\" [disabled]=\"!canEditTask(task)\"\n                  (change)=\"toggleTaskCompletion(task)\"\n                  class=\"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 disabled:opacity-50 cursor-pointer\">\n\n                <!-- View Mode: Name -->\n                <span *ngIf=\"!isEditMode\" class=\"text-gray-800 dark:text-gray-200 font-medium\"\n                  [class.line-through]=\"task.isCompleted\" [class.text-gray-500]=\"task.isCompleted\">\n                  {{ task.name }}\n                </span>\n                <!-- Edit Mode: Name Input -->\n                <input *ngIf=\"isEditMode\" [(ngModel)]=\"task.name\" (blur)=\"updateTask(task)\" (input)=\"onFieldChange()\"\n                  class=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-blue-500 focus:border-blue-500\">\n              </div>\n\n              <!-- Right: Meta Info & Actions -->\n              <div class=\"flex items-center gap-4\">\n                <!-- Status Badge -->\n                <span [class]=\"getStatusBadgeClass(task.status)\">{{ task.status | titlecase }}</span>\n\n                <!-- Date -->\n                <span *ngIf=\"!isEditMode\" class=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:block\">\n                  {{ task.endDate | date:'MMM d' }}\n                </span>\n                <!-- Edit Mode: Date Input -->\n                <input *ngIf=\"isEditMode\" type=\"date\" [ngModel]=\"task.endDate | date:'yyyy-MM-dd'\"\n                  (ngModelChange)=\"task.endDate = $event; updateTask(task); onFieldChange()\"\n                  class=\"text-xs border border-gray-300 rounded px-2 py-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white\">\n\n                <!-- Avatars -->\n                <div class=\"flex items-center -space-x-2\">\n                  <img *ngFor=\"let user of task.assignedTeamMembers\" [src]=\"user.avatar\" [alt]=\"user.name\"\n                    [title]=\"user.name\" class=\"w-6 h-6 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n                </div>\n\n                <!-- Assign Dropdown (Visible on hover or if unassigned) - Only for Admin/PM or in Edit Mode -->\n                <select *ngIf=\"canManageProject || isEditMode\"\n                  (change)=\"assignUserToTask(task, $event); onFieldChange()\"\n                  class=\"text-xs bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 rounded focus:ring-blue-500 focus:border-blue-500 py-1 pl-2 pr-6 transition-opacity\"\n                  [class.opacity-0]=\"!isEditMode && task.assignedTeamMembers.length > 0\"\n                  [class.group-hover:opacity-100]=\"!isEditMode\">\n                  <option value=\"\">Assign...</option>\n                  <option *ngFor=\"let user of availableManagers\" [value]=\"user.id\">\n                    {{ user.name }}\n                  </option>\n                </select>\n              </div>\n            </div>\n\n            <div *ngIf=\"stage.tasks.length === 0\" class=\"text-center py-4 text-gray-500 dark:text-gray-400\">\n              No tasks in this stage yet.\n            </div>\n          </div>\n        </div>\n\n        <!-- Assigned Personnel -->\n        <div>\n          <h5 class=\"font-semibold text-gray-700 dark:text-gray-300 mb-3\">Assigned Stage Personnel</h5>\n          <div class=\"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-md\">\n            <div class=\"flex items-center -space-x-2\">\n              <img *ngFor=\"let user of stage.assignedTeamMembers\" [src]=\"user.avatar\" [alt]=\"user.name\"\n                [title]=\"user.name\" class=\"w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n              <span *ngIf=\"stage.assignedTeamMembers.length === 0\" class=\"text-sm text-gray-500 ml-2\">No one\n                assigned</span>\n            </div>\n\n            <select *ngIf=\"canManageProject\" (change)=\"assignUserToStage(stage, $event)\"\n              class=\"text-sm bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500\">\n              <option value=\"\">Assign user...</option>\n              <option *ngFor=\"let user of availableManagers\" [value]=\"user.id\">\n                {{ user.name }}\n              </option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Comments Section -->\n  <div class=\"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6\">\n    <h3 class=\"text-xl font-bold text-gray-800 dark:text-white mb-4\">Comments</h3>\n\n    <!-- Comment List -->\n    <div class=\"space-y-4 mb-6\">\n      <div *ngFor=\"let comment of comments\" class=\"flex gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg\">\n        <img [src]=\"comment.user.avatar\" [alt]=\"comment.user.name\"\n          class=\"w-10 h-10 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n        <div class=\"flex-1\">\n          <div class=\"flex justify-between items-center mb-1\">\n            <h4 class=\"font-semibold text-gray-900 dark:text-white\">{{ comment.user.name }}</h4>\n            <span class=\"text-xs text-gray-500 dark:text-gray-400\">{{ comment.createdAt | date:'medium' }}</span>\n          </div>\n          <p class=\"text-gray-700 dark:text-gray-300\">{{ comment.content }}</p>\n        </div>\n      </div>\n      <div *ngIf=\"comments.length === 0\" class=\"text-center text-gray-500 dark:text-gray-400 py-4\">\n        No comments yet. Be the first to share your thoughts!\n      </div>\n    </div>\n\n    <!-- Add Comment -->\n    <div class=\"flex gap-4 items-start\">\n      <img [src]=\"currentUser?.avatar\" [alt]=\"currentUser?.name\"\n        class=\"w-10 h-10 rounded-full object-cover ring-2 ring-white dark:ring-gray-800\">\n      <div class=\"flex-1\">\n        <textarea [(ngModel)]=\"newCommentContent\" placeholder=\"Add a comment...\" rows=\"3\"\n          class=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white resize-none\"></textarea>\n        <div class=\"flex justify-end mt-2\">\n          <button (click)=\"postComment()\" [disabled]=\"!newCommentContent.trim()\"\n            class=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\">\n            Post Comment\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}