{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/project.service\";\nimport * as i3 from \"@angular/common\";\nfunction TaskModalComponent_div_0_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \" Task name is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TaskModalComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function TaskModalComponent_div_0_Template_div_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onBackdropClick($event));\n    });\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵlistener(\"click\", function TaskModalComponent_div_0_Template_div_click_1_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementStart(2, \"div\", 3)(3, \"h3\", 4);\n    i0.ɵɵtext(4, \"Add New Task\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"form\", 5);\n    i0.ɵɵlistener(\"ngSubmit\", function TaskModalComponent_div_0_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onSubmit());\n    });\n    i0.ɵɵelementStart(6, \"div\")(7, \"label\", 6);\n    i0.ɵɵtext(8, \" Task Name * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 7);\n    i0.ɵɵtemplate(10, TaskModalComponent_div_0_div_10_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 9);\n    i0.ɵɵtext(13, \" Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"textarea\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"div\")(17, \"label\", 12);\n    i0.ɵɵtext(18, \" Start Date * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\")(21, \"label\", 14);\n    i0.ɵɵtext(22, \" End Date * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"input\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\")(25, \"label\", 16);\n    i0.ɵɵtext(26, \" Estimated Hours \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"input\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 18)(29, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function TaskModalComponent_div_0_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.closeModal());\n    });\n    i0.ɵɵtext(30, \" Cancel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 20);\n    i0.ɵɵtext(32, \" Create Task \");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.taskForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx_r0.taskForm.get(\"name\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx_r0.taskForm.get(\"name\")) == null ? null : tmp_1_0.touched));\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.taskForm.valid);\n  }\n}\nlet TaskModalComponent = /*#__PURE__*/(() => {\n  class TaskModalComponent {\n    fb;\n    projectService;\n    stageId;\n    taskCreated = new EventEmitter();\n    modalClosed = new EventEmitter();\n    taskForm;\n    showModal = true;\n    constructor(fb, projectService) {\n      this.fb = fb;\n      this.projectService = projectService;\n      this.taskForm = this.fb.group({\n        name: ['', Validators.required],\n        description: [''],\n        startDate: ['', Validators.required],\n        endDate: ['', Validators.required],\n        estimatedHours: [0, [Validators.min(0)]]\n      });\n    }\n    ngOnInit() {\n      // Set default dates\n      const today = new Date();\n      const oneWeekLater = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);\n      this.taskForm.patchValue({\n        startDate: today.toISOString().split('T')[0],\n        endDate: oneWeekLater.toISOString().split('T')[0]\n      });\n    }\n    onSubmit() {\n      if (this.taskForm.valid) {\n        const taskData = {\n          ...this.taskForm.value,\n          startDate: new Date(this.taskForm.value.startDate),\n          endDate: new Date(this.taskForm.value.endDate),\n          isCompleted: false,\n          status: 'on_track'\n        };\n        this.projectService.addTaskToStage(this.stageId, taskData).subscribe({\n          next: () => {\n            this.taskCreated.emit();\n            this.closeModal();\n          },\n          error: error => console.error('Error creating task:', error)\n        });\n      }\n    }\n    closeModal() {\n      this.showModal = false;\n      this.modalClosed.emit();\n    }\n    onBackdropClick(event) {\n      if (event.target.classList.contains('modal-backdrop')) {\n        this.closeModal();\n      }\n    }\n    static ɵfac = function TaskModalComponent_Factory(t) {\n      return new (t || TaskModalComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProjectService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TaskModalComponent,\n      selectors: [[\"app-task-modal\"]],\n      inputs: {\n        stageId: \"stageId\"\n      },\n      outputs: {\n        taskCreated: \"taskCreated\",\n        modalClosed: \"modalClosed\"\n      },\n      decls: 1,\n      vars: 1,\n      consts: [[\"class\", \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 modal-backdrop\", 3, \"click\", 4, \"ngIf\"], [1, \"fixed\", \"inset-0\", \"bg-black\", \"bg-opacity-50\", \"flex\", \"items-center\", \"justify-center\", \"p-4\", \"z-50\", \"modal-backdrop\", 3, \"click\"], [1, \"bg-white\", \"dark:bg-gray-800\", \"rounded-lg\", \"shadow-xl\", \"w-full\", \"max-w-md\", 3, \"click\"], [1, \"p-6\"], [1, \"text-lg\", \"font-bold\", \"text-gray-900\", \"dark:text-white\", \"mb-4\"], [1, \"space-y-4\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"taskName\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-1\"], [\"type\", \"text\", \"id\", \"taskName\", \"formControlName\", \"name\", \"placeholder\", \"Enter task name\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-700\", \"dark:text-white\"], [\"class\", \"text-red-500 text-xs mt-1\", 4, \"ngIf\"], [\"for\", \"taskDescription\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-1\"], [\"id\", \"taskDescription\", \"formControlName\", \"description\", \"rows\", \"3\", \"placeholder\", \"Enter task description (optional)\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-700\", \"dark:text-white\"], [1, \"grid\", \"grid-cols-2\", \"gap-4\"], [\"for\", \"startDate\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-1\"], [\"type\", \"date\", \"id\", \"startDate\", \"formControlName\", \"startDate\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-700\", \"dark:text-white\"], [\"for\", \"endDate\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-1\"], [\"type\", \"date\", \"id\", \"endDate\", \"formControlName\", \"endDate\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-700\", \"dark:text-white\"], [\"for\", \"estimatedHours\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"dark:text-gray-300\", \"mb-1\"], [\"type\", \"number\", \"id\", \"estimatedHours\", \"formControlName\", \"estimatedHours\", \"min\", \"0\", \"placeholder\", \"0\", 1, \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"dark:border-gray-600\", \"rounded-md\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"dark:bg-gray-700\", \"dark:text-white\"], [1, \"flex\", \"justify-end\", \"gap-3\", \"pt-4\"], [\"type\", \"button\", 1, \"px-4\", \"py-2\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"bg-gray-100\", \"rounded-md\", \"hover:bg-gray-200\", \"dark:bg-gray-700\", \"dark:text-gray-200\", \"dark:hover:bg-gray-600\", \"transition\", 3, \"click\"], [\"type\", \"submit\", 1, \"px-4\", \"py-2\", \"text-sm\", \"font-medium\", \"text-white\", \"bg-blue-600\", \"rounded-md\", \"hover:bg-blue-700\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", \"transition\", 3, \"disabled\"], [1, \"text-red-500\", \"text-xs\", \"mt-1\"]],\n      template: function TaskModalComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, TaskModalComponent_div_0_Template, 33, 3, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n        }\n      },\n      dependencies: [i3.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;max-width:32rem;width:90%;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column}.dark[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{background-color:#1f2937;color:#f3f4f6}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.dark[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom-color:#374151}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1f2937}.dark[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f3f4f6}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#6b7280;padding:0;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;border-radius:.375rem;transition:background-color .2s}.close-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dark[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#374151}.modal-content[_ngcontent-%COMP%]{padding:1.5rem;flex:1;overflow-y:auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:600;color:#374151}.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#d1d5db}.form-control[_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem;font-size:.875rem;border:1px solid #d1d5db;border-radius:.375rem;background-color:#fff;color:#1f2937;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#374151;border-color:#4b5563;color:#f3f4f6}.dark[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa1a}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:4rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:.75rem}.dark[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top-color:#374151}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem;font-weight:600;border:none;border-radius:.375rem;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background-color:#e5e7eb;color:#1f2937}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#d1d5db}.dark[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#4b5563;color:#f3f4f6}.dark[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background-color:#6b7280}.required[_ngcontent-%COMP%]:after{content:\\\"*\\\";color:#ef4444;margin-left:.25rem}.error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:.75rem;margin-top:.25rem}.dark[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#fca5a5}\"]\n    });\n  }\n  return TaskModalComponent;\n})();\nexport { TaskModalComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}